<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="VwBudgetGp">

	<typeAlias alias="vwBudgetGp"
		type="com.ufgov.zc.common.budget.model.VwBudgetGp" />	<typeAlias alias="elementCondition"		type="com.ufgov.zc.common.system.dto.ElementConditionDto" />			<resultMap id="vwBudgetGpCheck" class="vwBudgetGp">		<result property="sumId" column="SUM_ID" />		<result property="canuseMoney" column="CANUSE_MONEY" />	</resultMap>
	<resultMap id="vwBudgetGpResult" class="vwBudgetGp">		<result property="sumId" column="SUM_ID" />		<result property="budgetMoney" column="BUDGET_MONEY" />		<result property="canuseMoney" column="CANUSE_MONEY" />		<result property="enCode" column="EN_CODE" />		<result property="enName" column="EN_NAME" />		<result property="mkCode" column="MK_CODE" />		<result property="mkName" column="MK_NAME" />		<result property="bsCode" column="BS_CODE" />		<result property="bsName" column="BS_NAME" />		<result property="biCode" column="BI_CODE" />		<result property="biName" column="BI_NAME" />		<result property="pkCode" column="PK_CODE" />		<result property="pkName" column="PK_NAME" />		<result property="boCode" column="BO_CODE" />		<result property="boName" column="BO_NAME" />		<result property="mbCode" column="MB_CODE" />		<result property="mbName" column="MB_NAME" />		<result property="btCode" column="BT_CODE" />		<result property="btName" column="BT_NAME" />		<result property="bpCode" column="BP_CODE" />		<result property="bpName" column="BP_NAME" />		<result property="blCode" column="BL_CODE" />		<result property="blName" column="BL_NAME" />		<result property="bisCode" column="BIS_CODE" />		<result property="bisName" column="BIS_NAME" />		<result property="smCode" column="SM_CODE" />		<result property="smName" column="SM_NAME" />		<result property="gbCode" column="GB_CODE" />		<result property="gbName" column="GB_NAME" />		<result property="saltagCode" column="SALTAG_CODE" />		<result property="saltagName" column="SALTAG_NAME" />		<result property="fileName" column="FILE_NAME" />		<result property="fileCode" column="FILE_code" />		<result property="budgetVouCode" column="budget_vou_code" />		<result property="budgetVouName" column="budget_vou_name" />		<result property="gpplanCode" column="gpplan_code" />		<result property="gpplanName" column="gpplan_name" />		<result property="inpmCode" column="inpm_code" />		<result property="inpmName" column="inpm_name" />		<result property="setYear" column="SET_YEAR" />		<result property="rgCode" column="RG_CODE" />		<result property="enId" column="EN_ID" />		<result property="mkId" column="MK_ID" />		<result property="bsId" column="BS_ID" />		<result property="biId" column="BI_ID" />		<result property="pkId" column="PK_ID" />		<result property="boId" column="BO_ID" />		<result property="mbId" column="MB_ID" />		<result property="btId" column="BT_ID" />		<result property="bpId" column="BP_ID" />		<result property="blId" column="BL_ID" />		<result property="bisId" column="BIS_ID" />		<result property="smId" column="SM_ID" />		<result property="gbId" column="GB_ID" />		<result property="saltagId" column="SALTAG_ID" />		<result property="fileId" column="FILE_id" />		<result property="budgetVouId" column="budget_vou_id" />		<result property="gpplanId" column="gpplan_id" />		<result property="inpmId" column="inpm_id" />		<result property="bsiId" column="BSI_ID" />		<result property="bsiCode" column="BSI_CODE" />		<result property="bsiName" column="BSI_NAME" />
	</resultMap>
	<select id="getVwBudgetGp" resultMap="vwBudgetGpResult"
		parameterClass="com.ufgov.zc.common.system.dto.ElementConditionDto">
		SELECT SUM_ID,BUDGET_MONEY		<isNotEmpty prepend="," property="zcMakeCode">			CANUSE_MONEY+(select nvl(sum(ZC_BI_JHUA_SUM),0) from ZC_P_PRO_MITEM_BI where			ZC_MAKE_CODE=#zcMakeCode# and ZC_BI_NO=SUM_ID) CANUSE_MONEY,		</isNotEmpty>		<isEmpty prepend="," property="zcMakeCode">			CANUSE_MONEY,		</isEmpty>		EN_CODE,EN_NAME,MK_CODE,MK_NAME,BS_CODE,BS_NAME,BI_CODE,BI_NAME,PK_CODE,PK_NAME,BO_CODE,BO_NAME,MB_CODE,		MB_NAME,BT_CODE,BT_NAME,BP_CODE,BP_NAME,BL_CODE,BL_NAME,BIS_CODE,BIS_NAME,SM_CODE,SM_NAME,GB_CODE,GB_NAME,		SALTAG_CODE,SALTAG_NAME,FILE_NAME,FILE_code,budget_vou_code,budget_vou_name,gpplan_code,gpplan_name,inpm_code,		inpm_name,SET_YEAR,RG_CODE,EN_ID,MK_ID,BS_ID,BI_ID,PK_ID,BO_ID,MB_ID,BT_ID,BP_ID,BL_ID,BIS_ID,SM_ID,GB_ID,		SALTAG_ID,FILE_id,budget_vou_id,gpplan_id,inpm_id,BSI_ID,BSI_CODE,BSI_NAME		FROM vw_budget_gb		WHERE 1=1		<isNotEmpty prepend="AND" property="zcText0">			SUM_ID = #zcText0#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText1">			FILE_CODE=#zcText1#		</isNotEmpty>		<isNotEmpty prepend="AND" property="nd">			SET_YEAR = #nd#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText2">		  <![CDATA[CANUSE_MONEY > 0]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="coCode">			EN_CODE = #coCode#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText3">		  <![CDATA[SUM_ID not in ($zcText3$)]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText4">		  <![CDATA[SUM_ID in ($zcText4$)]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="orgCode">			MB_ID = #orgCode#		</isNotEmpty>		ORDER BY gpplan_code
	</select>	<select id="getVwBudgetGpByQx" resultMap="vwBudgetGpResult"		parameterClass="com.ufgov.zc.common.system.dto.ElementConditionDto">		SELECT SUM_ID,BUDGET_MONEY		<isNotEmpty prepend="," property="zcMakeCode">			CANUSE_MONEY+(select nvl(sum(ZC_BI_JHUA_SUM),0) from ZC_QX_BI where QX_CODE=#zcMakeCode#			and ZC_BI_NO=SUM_ID) CANUSE_MONEY,		</isNotEmpty>		<isEmpty prepend="," property="zcMakeCode">			CANUSE_MONEY,		</isEmpty>		EN_CODE,EN_NAME,MK_CODE,MK_NAME,BS_CODE,BS_NAME,BI_CODE,BI_NAME,PK_CODE,PK_NAME,BO_CODE,BO_NAME,MB_CODE,		MB_NAME,BT_CODE,BT_NAME,BP_CODE,BP_NAME,BL_CODE,BL_NAME,BIS_CODE,BIS_NAME,SM_CODE,SM_NAME,GB_CODE,GB_NAME,		SALTAG_CODE,SALTAG_NAME,FILE_NAME,FILE_code,budget_vou_code,budget_vou_name,gpplan_code,gpplan_name,inpm_code,		inpm_name,SET_YEAR,RG_CODE,EN_ID,MK_ID,BS_ID,BI_ID,PK_ID,BO_ID,MB_ID,BT_ID,BP_ID,BL_ID,BIS_ID,SM_ID,GB_ID,		SALTAG_ID,FILE_id,budget_vou_id,gpplan_id,inpm_id,BSI_ID,BSI_CODE,BSI_NAME		FROM vw_budget_gb		WHERE GB_CODE='1'		<isNotEmpty prepend="AND" property="zcText0">			SUM_ID = #zcText0#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText1">			FILE_CODE=#zcText1#		</isNotEmpty>		<isNotEmpty prepend="AND" property="nd">			SET_YEAR = #nd#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText2">		  <![CDATA[CANUSE_MONEY > 0]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="coCode">			EN_CODE = #coCode#		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText3">		  <![CDATA[SUM_ID not in ($zcText3$)]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="zcText4">		  <![CDATA[SUM_ID in ($zcText4$)]]>		</isNotEmpty>		<isNotEmpty prepend="AND" property="orgCode">			MB_ID = #orgCode#		</isNotEmpty>		ORDER BY gpplan_code	</select>	<select id="getVwBudgetGpById" resultMap="vwBudgetGpResult"		parameterClass="java.lang.String">		SELECT *		FROM vw_budget_gb		WHERE SUM_ID = #id#	</select>	<select id="checkVwBudgetGp" resultMap="vwBudgetGpCheck"		parameterClass="java.util.HashMap">		select SUM_ID, nvl(sum(CANUSE_MONEY), 0) CANUSE_MONEY		from (select SUM_ID, CANUSE_MONEY		from vw_budget_gb		where SUM_ID in ($sumId$)		<isNotEmpty prepend="AND" property="nd">			SET_YEAR = #nd#		</isNotEmpty>		union all		select ZC_BI_NO SUM_ID, ZC_BI_JHUA_SUM CANUSE_MONEY		from ZC_P_PRO_MITEM_BI PRO		where pro.zc_make_code = #zcMakeCode#)		group by SUM_ID	</select>	<select id="getExistsBudget" resultClass="String"		parameterClass="String">		select SUM_ID		from vw_budget_gb		where SUM_ID in ($value$)		group by SUM_ID	</select>	<select id="getVwBudgetGpByBiNoLst" resultMap="vwBudgetGpResult"		parameterClass="String">		select *		from vw_budget_gb		where SUM_ID in ($value$)	</select>	<select id="getVwBudgetGpByBiNo" resultMap="vwBudgetGpResult"		parameterClass="String">		select *		from vw_budget_gb		where SUM_ID=#value#	</select>		<select id="selectShouRou" resultClass="java.math.BigDecimal"		parameterClass="elementCondition">		select sr.shouru from vw_budget_shouru sr where sr.en_code=#coCode# and sr.set_year=#nd#	</select>
</sqlMap>
