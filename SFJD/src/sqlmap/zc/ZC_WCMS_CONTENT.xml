<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="ZC_WCMS_CONTENT">
	<typeAlias alias="content" type="com.ufgov.zc.common.zc.model.Content" />	<typeAlias alias="declarationContent" type="com.ufgov.zc.common.zc.model.DeclarationContent" />    <typeAlias alias="asOption" type="com.ufgov.zc.common.system.model.AsOption"/>
    <resultMap id="content" class="content">        <result property="ID" column="ID"/>        <result property="title" column="TITLE"/>        <result property="subTitle" column="SUB_TITLE"/>        <result property="content" column="CONTENT" jdbcType="CLOB" javaType="java.lang.String"/>        <result property="author" column="AUTHOR"/>        <result property="type" column="TYPE"/>        <result property="createDate" column="CREATE_DATE"/>        <result property="isImport" column="IS_IMPORT"/>    </resultMap>    <resultMap id="declarationContent" class="declarationContent">        <result property="ID" column="ID"/>        <result property="declarationType" column="DECLARATION_TYPE"/>        <result property="bidType" column="BID_TYPE"/>        <result property="bidWay" column="BID_WAY"/>        <result property="bidMenu" column="BID_MENU"/>        <result property="region" column="REGION"/>        <result property="openBidDate" column="OPEN_BID_DATE"/>        <result property="openBidAddress" column="OPEN_BID_ADDRESS"/>        <result property="projCode" column="PROJ_CODE"/>        <result property="packCode" column="PACK_CODE"/>        <result property="projName" column="PROJ_NAME"/>        <result property="orgName" column="ORG_NAME"/>        <result property="executorName" column="EXECUTOR_NAME"/>    </resultMap>    <resultMap id="declarationContentSim" class="declarationContent">        <result property="bidType" column="BID_TYPE"/>        <result property="bidWay" column="BID_WAY"/>        <result property="bidMenu" column="BID_MENU"/>        <result property="openBidDate" column="OPEN_BID_DATE"/>        <result property="openBidAddress" column="OPEN_BID_ADDRESS"/>        <result property="projName" column="PROJ_NAME"/>        <result property="orgName" column="ORG_NAME"/>        <result property="executorName" column="EXECUTOR_NAME"/>        <result property="declarationType" column="BULNAME"/>    </resultMap>    <resultMap id="asOption" class="asOption">        <result property="optId" column="OPT_ID"/>        <result property="optVal" column="OPT_VAL"/>    </resultMap>    <resultMap id="string" class="java.lang.String">        <result property="value" column="value"/>    </resultMap>    <insert id="insertContent" parameterClass="content">        insert into ZC_WCMS_CONTENT(ID,TITLE,SUB_TITLE,CONTENT,TYPE,AUTHOR,IS_IMPORT,CREATE_DATE )        values ( #ID#,#title#,#subTitle#,#content#,#type#,#author#,#isImport#,SYSDATE)    </insert>    <select id="selectContent" parameterClass="String" resultMap="content">    select * from ZC_WCMS_CONTENT where id=#value#    </select>    <insert id="insertDeclarationContent" parameterClass="declarationContent">        insert into zc_wcms_content_declaration(ID,DECLARATION_TYPE,BID_TYPE,BID_WAY,BID_MENU,REGION,OPEN_BID_DATE,OPEN_BID_ADDRESS,PROJ_CODE,PACK_CODE        ,PROJ_NAME,ORG_NAME,EXECUTOR_NAME,DOWNLOAD_INFO)        values ( #ID#,#declarationType#,#bidType#,#bidWay#,#bidMenu#,#region#,#openBidDate#,#openBidAddress#,#projCode#,#packCode#,        #projName#,#orgName#,#executorName#,#downloadInfo#)    </insert>    <update id="updateDeclarationContent"  parameterClass="com.ufgov.zc.common.zc.model.ZcEbBulletin">    update zc_wcms_content_declaration set DOWNLOAD_INFO=#downLoad# where ID=#bulletinID#    </update>	<select id="getMailInfo" resultMap="asOption">	SELECT OPT_ID,OPT_VAL FROM AS_OPTION WHERE OPT_ID LIKE 'OPT_ZC_MAIL_%' and CO_CODE='*' and COMPO_ID='*'  and TRANS_TYPE='*'	</select>	<select id="getSuMail" resultMap="string" parameterClass="Map">	select t.email value from zc_b_supplier t where t.zc_su_code in(select provider_code from Zc_Eb_Signup s,zc_eb_signup_pack p where p.pack_code in ($packCode$) and s.proj_code=#projCode# and s.signup_id=p.signup_id and p.SP_STATUS='1')and t.email is not null	</select>	<select id="getBulInfo" resultMap="declarationContentSim" parameterClass="string">    select distinct t.val              BID_WAY,                w.Pur_Type              BID_MENU,                o.val              BID_TYPE,                w.open_bid_time OPEN_BID_DATE,                w.open_bid_address OPEN_BID_ADDRESS,                w.ATTN_NAME EXECUTOR_NAME,                '' ORG_NAME,                w.proj_name PROJ_NAME,                decode(w.Pur_Type,'5','',ma.co_name)||w.proj_name  BULNAME  from (select * from as_val where valset_id = 'BULLETIN_OUTLAN_CGFS') t,       (select * from as_val where valset_id = 'BULLETIN_OUTLAN_ZZXS') o,       (select * from as_val where valset_id = 'ZC_VS_PITEM_OPIWAY') c,       (select pr.pur_type Pur_Type,               '1' zc_pitem_opiway,               pl.open_bid_time,               pl.open_bid_address,               pr.ATTN_NAME,               pr.ATTN,               pr.proj_name,               pr.CO_CODE,               to_char(pr.nd) nd          from zc_eb_plan      pl,               zc_eb_proj pr         where pr.proj_code = #value#           and pl.proj_code = pr.proj_code        union        select e.ZC_PIFU_CGFS,               '1',               null,               '',               sh.ATTN_NAME,               sh.ATTN,               e.ZC_MAKE_NAME,               e.co_code,               e.nd          from zc_eb_entrust   e,               zc_eb_duty_audit_sheet sh          where e.sn=sh.sn          and e.sn_code=#value#) w,         as_emp emp,         as_emp_position ep,         MA_COMPANY ma where w.Pur_Type = t.val_id   and w.pur_type=c.val_id   and w.zc_pitem_opiway = o.val_id   and w.ATTN=emp.user_id   and emp.emp_code=ep.emp_code   and w.co_code=ma.co_code(+)   and w.nd=ep.nd(+)   and w.nd=ep.nd   and w.nd=ma.nd   	</select>
</sqlMap>
