package com.ufgov.zc.client.common;import java.util.HashMap;import java.util.Map;import com.ufgov.zc.common.commonbiz.model.MaTzdSumElement;import com.ufgov.zc.common.commonbiz.publish.IBaseDataServiceDelegate;import com.ufgov.zc.common.system.RequestMeta;public class TzdSumElementMeta {  private Map<String, MaTzdSumElement> sumElementMap = new HashMap<String, MaTzdSumElement>();  private static Map<String, TzdSumElementMeta> dataCache = new HashMap<String, TzdSumElementMeta>();  public static TzdSumElementMeta getBillElementMeta(String billTypeCode) {    TzdSumElementMeta bem = dataCache.get(billTypeCode + "-" + WorkEnv.getInstance().getCurrUserId());    if (bem == null) {      bem = new TzdSumElementMeta();      bem.init(billTypeCode);      dataCache.put(billTypeCode + "-" + WorkEnv.getInstance().getCurrUserId(), bem);    }    return bem;  }  public static void refreshBillElementMeta(String billTypeCode) {    TzdSumElementMeta bem = new TzdSumElementMeta();    bem.init(billTypeCode);    dataCache.put(billTypeCode + "-" + WorkEnv.getInstance().getCurrUserId(), bem);  }  private void init(String elementType) {    RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();    IBaseDataServiceDelegate baseDataServiceDelegate = (IBaseDataServiceDelegate) ServiceFactory.create(    IBaseDataServiceDelegate.class, "baseDataServiceDelegate");    int nd = WorkEnv.getInstance().getTransNd();    sumElementMap = baseDataServiceDelegate.getMaTzdSumElementMap(nd, elementType, requestMeta, WorkEnv    .getInstance().getCurrUserId());  }  public MaTzdSumElement getMaTzdSumElement(String elementCode) {    return this.sumElementMap.get(elementCode);  }  public Map getMaTzdSumElementMap() {    return this.sumElementMap;  }  public boolean isSum(String elementCode) {    boolean isSum = false;    if (this.sumElementMap.get(elementCode) != null    && "1".equals(this.sumElementMap.get(elementCode).getIsSum())) {      isSum = true;    }    return isSum;  }}