package com.ufgov.zc.client.util;import java.util.List;import com.ufgov.zc.client.common.ServiceFactory;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.common.commonbiz.model.Company;import com.ufgov.zc.common.commonbiz.publish.IBaseDataServiceDelegate;import com.ufgov.zc.common.system.RequestMeta;public class CoCodeFilterUtil {  private static IBaseDataServiceDelegate baseDataServiceDelegate = (IBaseDataServiceDelegate) ServiceFactory  .create(IBaseDataServiceDelegate.class, "baseDataServiceDelegate");  /**   *主管单位   */  private static final String masterCoType = "03";  /**   * 基层单位   */  private static final String jcCoType = "02";  public static String genFilter(Company company) {    if (company == null) {      return null;    }    String coType = company.getCoTypeCode();    String coCode = company.getCode();    String coCodeFilter = null;    if (coType != null && coCode != null) {      if (coType.trim().equals(masterCoType)) {        coCodeFilter = genMasterCoTypeFilter(coCode);      } else if (coType.trim().equals(jcCoType)) {        coCodeFilter = " co_code ='" + coCode + "'";      } else if (!coType.trim().equals("01")) {        coCodeFilter = " co_code like '" + coCode + "%'";      }    }    return coCodeFilter;  }  public static String genFilter(String coCode) {    RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();    int nd = WorkEnv.getInstance().getTransNd();    Company company = baseDataServiceDelegate.getCompanyByCoCode(nd, coCode,    requestMeta);    return genFilter(company);  }  private static String genMasterCoTypeFilter(String coCode) {    RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();    int nd = WorkEnv.getInstance().getTransNd();    List list = baseDataServiceDelegate.getCompanyChildren(nd, coCode, requestMeta);    StringBuffer coCodeFilter = new StringBuffer(" ( ");    for (int i = 0; i < list.size(); i++) {      Company company = (Company) list.get(i);      coCodeFilter.append("co_code ='").append(company.getCode()).append("' or ");    }    coCodeFilter.append(" 1=0 )");    return coCodeFilter.toString();  }}