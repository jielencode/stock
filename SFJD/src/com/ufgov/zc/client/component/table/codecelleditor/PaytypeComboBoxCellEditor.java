package com.ufgov.zc.client.component.table.codecelleditor;import java.awt.Component;import javax.swing.JTable;import javax.swing.table.TableCellEditor;import com.ufgov.zc.client.common.BillElementMeta;import com.ufgov.zc.client.component.element.PaytypeComboBox;import com.ufgov.zc.client.component.table.BeanTableModel;import com.ufgov.zc.client.component.table.GkAbstractCellEditor;import com.ufgov.zc.common.commonbiz.model.BaseBill;import com.ufgov.zc.common.commonbiz.model.Paytype;import com.ufgov.zc.common.dp.model.DpDetail;public class PaytypeComboBoxCellEditor extends GkAbstractCellEditor implements TableCellEditor {  private static final long serialVersionUID = -1014964575090820890L;  private PaytypeComboBox editorComponent;  private String dataRuleId;  private BillElementMeta bem;  public PaytypeComboBoxCellEditor() {    init();  }  public PaytypeComboBoxCellEditor(BillElementMeta bem) {    this.bem = bem;    init();  }  public PaytypeComboBoxCellEditor(String dataRuleId) {    this.dataRuleId = dataRuleId;    init();  }  private void init() {    editorComponent = new PaytypeComboBox(dataRuleId);    editorComponent.initComboBox();    editorComponent.setBillElementMeta(bem);  }  public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row,  int column) {    editorComponent.setSelectedPaytypeByCode((String) value);    if (table.getModel() instanceof BeanTableModel) {      BaseBill bill = (BaseBill) ((BeanTableModel) table.getModel()).getBean(row);      if (bill instanceof DpDetail) {        DpDetail dp = (DpDetail) bill;        if (dp.getBiBal() != null) {          editorComponent.setPrefix(dp.getBiBal().getPaytypeCode());        }      }    }    return editorComponent;  }  public Object getCellEditorValue() {    String code = null;    Paytype value = editorComponent.getSelectedPaytype();    if (value != null) {      code = value.getCode();    }    return code;  }}