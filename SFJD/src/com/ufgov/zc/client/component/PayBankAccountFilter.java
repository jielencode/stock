package com.ufgov.zc.client.component;import java.util.ArrayList;import java.util.List;import org.josql.Query;import org.josql.QueryResults;import com.ufgov.zc.client.datacache.FundDataCache;import com.ufgov.zc.common.commonbiz.model.BankAccount;import com.ufgov.zc.common.commonbiz.model.Fund;import com.ufgov.zc.common.system.exception.JoSqlDataHandleException;public class PayBankAccountFilter {  public static List<BankAccount> getPayBankAccount(Fund fund, List dataList) {    if (fund == null) {      return dataList;    }    String joSql = "select * from " + BankAccount.class.getName() + " where fundCode like :fundCode ";    joSql += getJoSql(fund);    Query query = new Query();    List<BankAccount> payBankAccountList = new ArrayList<BankAccount>();    try {      query.parse(joSql);      query.setVariable("fundCode", fund.getCode() + "%");      QueryResults rs = query.execute(dataList);      payBankAccountList = rs.getResults();    } catch (Exception e) {      throw new JoSqlDataHandleException("", e);    }    return payBankAccountList;  }  private static String getJoSql(Fund fund) {    StringBuffer sb = new StringBuffer();    while (fund != null) {      if (fund.getParentCode() == null)        break;      fund = FundDataCache.getBean(fund.getParentCode());      sb.append(" or fundCode ='").append(fund.getCode()).append("'");    }    return sb.toString();  }}