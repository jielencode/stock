package com.ufgov.zc.client.component.element;import java.awt.BorderLayout;import java.awt.Dialog;import java.awt.event.WindowAdapter;import java.awt.event.WindowEvent;import javax.swing.JFrame;import javax.swing.JPanel;import javax.swing.JTextField;import com.ufgov.zc.client.common.AsOptionMeta;import com.ufgov.zc.client.component.JButtonTextField;import com.ufgov.zc.client.component.event.ValueChangeEvent;import com.ufgov.zc.client.component.event.ValueChangeListener;import com.ufgov.zc.common.commonbiz.model.Company;import com.ufgov.zc.common.system.util.LevelControlUtil;import com.ufgov.zc.common.zc.foreignentity.IForeignEntityTreeHandler;public class CompanyTreeSelectField extends JButtonTextField {  private CompanyTreeSelectField self = this;  private IForeignEntityTreeHandler handler;  public void setValue(Object value) {    this.value = value;    if (value != null) {      Company data = (Company) value;      this.setText(data.getName());      this.setToolTipText("[" + data.getCode() + "]" + data.getName());    } else {      this.setText("");      setToolTipText(null);    }    this.fireValueChanged();  }  public void setCompany(Company value) {    this.setValue(value);  }  public Company getCompany() {    return (Company) this.getValue();  }  public CompanyTreeSelectField(IForeignEntityTreeHandler handler) {    super();    this.handler = handler;    this.init(compoId);  }  public CompanyTreeSelectField(IForeignEntityTreeHandler handler, String compoId, String elementCode) {    super();    this.handler = handler;    this.init(compoId, elementCode);  }  public CompanyTreeSelectField(int col, String compoId) {    super(col);    this.init(compoId);  }  public CompanyTreeSelectField() {    super();    this.init(null);  }  public CompanyTreeSelectField(String compoId) {    super();    this.init(compoId);  }  public CompanyTreeSelectField(int col, Dialog owner) {    super(col);    this.owner = owner;    this.init(null);  }  public CompanyTreeSelectField(int col) {    super(col);    this.init(null);  }  public CompanyTreeSelectField(int col, Dialog owner, String compoId) {    super(col);    this.owner = owner;    this.init(compoId);  }  public CompanyTreeSelectField(Dialog owner) {    super();    this.owner = owner;    this.init(null);  }  public CompanyTreeSelectField(Dialog owner, String compoId) {    super();    this.owner = owner;    this.init(compoId);  }  public void handleClick(JButtonTextField jButtonTextField) {    await();    selectDialog.setVisible(true);  }  private void init(String compoId) {    this.elementCode = "CO_CODE";    this.compoId = compoId;    selectDialog = new CompanyTreeSelectDialog(owner, true, CompanyTreeSelectField.this, this.handler);  }  private void init(String compoId, String elementCode) {    if (elementCode == null || "".equals(elementCode)) {      this.elementCode = "CO_CODE";    } else {      this.elementCode = elementCode;    }    this.compoId = compoId;    selectDialog = new CompanyTreeSelectDialog(owner, true, CompanyTreeSelectField.this, this.handler);  }  public void setCtrlLevelNum(int ctrlLevelNum) {    super.setCtrlLevelNum(ctrlLevelNum);    this.ctrlLen = LevelControlUtil.getCtrLength(AsOptionMeta.getOptVal("OPT_CO_CODE"), ctrlLevelNum);  }  public static void main(String[] args) {    JFrame f = new JFrame();    long start = System.currentTimeMillis();    final CompanyTreeSelectField textField = new CompanyTreeSelectField(20, "CP_DTZD_VOU");    //		CompanyTreeSelectField textField = new CompanyTreeSelectField(20,"CP_DTZD_VOU");    System.out.println("time:" + (System.currentTimeMillis() - start));    textField.setEditable(true);    textField.setEnabled(false);    textField.setEnabled(true);    //		textField.addFocusListener( new FocusListener(){    //    //      public void focusGained(FocusEvent e) {    //      }    //    //      public void focusLost(FocusEvent e) {    //        JOptionPane.showMessageDialog(null,"");    //       String code=  textField.getText();    //       if(test){    //             //       }    //      }    //		      //		});    //		textField.setPrefix("017");    //		textField.setRandomEdit(false);    //		textField.setLevelCtrl(true);    textField.setCtrlLevelNum(3);    ValueChangeListener vcl = new ValueChangeListener() {      public void valueChanged(ValueChangeEvent e) {      }    };    ValueChangeListener vcl2 = new ValueChangeListener() {      public void valueChanged(ValueChangeEvent e) {      }    };    textField.addValueChangeListener(vcl2);    textField.addValueChangeListener(vcl);    textField.removeValueChangeListener(vcl);    //textField.setValueByCode("002");    JPanel panel = new JPanel();    panel.add(textField);    panel.add(new JTextField(30));    f.getContentPane().add(panel, BorderLayout.NORTH);    // f.pack();    // SwingUtilities.updateComponentTreeUI(panel);    f.setSize(400, 300);    f.setLocationRelativeTo(null);    f.setVisible(true);    f.addWindowListener(new WindowAdapter() {      public void windowClosing(WindowEvent e) {        System.exit(0);      }    });  }}