package com.ufgov.zc.client.component.element;import java.awt.BorderLayout;import java.awt.event.ItemEvent;import java.awt.event.ItemListener;import java.awt.event.WindowAdapter;import java.awt.event.WindowEvent;import java.util.HashMap;import java.util.List;import java.util.Map;import javax.swing.JFrame;import javax.swing.JPanel;import com.ufgov.zc.client.common.ServiceFactory;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.client.datacache.ManageForBiXJDataCache;import com.ufgov.zc.client.util.NumLimUtil;import com.ufgov.zc.common.commonbiz.model.Manage;import com.ufgov.zc.common.commonbiz.publish.IBaseDataServiceDelegate;import com.ufgov.zc.common.system.RequestMeta;import com.ufgov.zc.common.system.constants.NumLimConstants;import com.ufgov.zc.common.system.dto.ElementConditionDto;public class ManageForBiXJComboBox extends EditCtrlComboBox {  private Map<String, Manage> dataMap = new HashMap<String, Manage>();  public ManageForBiXJComboBox() {    super();    init(null);    initDataBufferList();  }  public ManageForBiXJComboBox(String compoId) {    super();    init(compoId);    initDataBufferList();  }  private void init(String compoId) {    this.compoId = compoId;    this.elementCode = "KIND";    this.addItemListener(new ItemListener() {      public void itemStateChanged(ItemEvent e) {        if (((Manage) getSelectedItem()) != null) {          setToolTipText(((Manage) e.getItem())          .getName());        } else {          setToolTipText(null);        }      }    });  }  private void initDataBufferList() {    int nd = WorkEnv.getInstance().getTransNd();    String baseDataServiceDelegateName = "baseDataServiceDelegate";    IBaseDataServiceDelegate baseDataServiceDelegate = (IBaseDataServiceDelegate) ServiceFactory    .create(IBaseDataServiceDelegate.class, baseDataServiceDelegateName);    RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();    ElementConditionDto dto = new ElementConditionDto();    dto.setNd(nd);    //	    dataBufferList = baseDataServiceDelegate.getManage(dto, requestMeta);    dataBufferList = ManageForBiXJDataCache.getManage();    //	    dto.setNumLimitStr(    //	      NumLimUtil.getInstance().getNumLimCondByCoType(compoId,NumLimConstants.FWATCH, elementCode));    //	  if(dto.getNumLimitStr()==null){    //	    numLimDataList=dataBufferList;    //	  }else{    numLimDataList = baseDataServiceDelegate.getManageForBiXJ(dto, requestMeta);    //	  }    for (int i = 0; i < numLimDataList.size(); i++) {      Manage data = (Manage) numLimDataList.get(i);      this.dataMap.put(data.getCode(), data);    }  }  public void initComboBox() {    //		List dataList = BaseElementDataFilter.doFilter(dataBufferList, randomEdit, prefix, levelCtrl, ctrlLevelNum);    //	  dataList=BaseElementDataFilter.doNumLimFilter(dataList, numLimDataList);    List dataList = numLimDataList;    this.removeAllItems();    this.addItem(null);    for (int i = 0; i < dataList.size(); i++) {      Manage data = (Manage) dataList.get(i);      this.addItem(data);      this.addItemDisplaLable(data, data.getName());    }  }  public Manage getSelectedManage() {    return (Manage) this.getSelectedItem();  }  public void setSelectedManage(Manage manage) {    this.setSelectedItem(manage);  }  public void setSelectedManageByCode(String manageCode) {    Manage manage = dataMap.get(manageCode);    this.setSelectedItem(manage);  }  public static void main(String[] args) {    JFrame f = new JFrame();    ManageForBiXJComboBox textField = new ManageForBiXJComboBox();    textField.setEditable(false);    textField.setEnabled(false);    textField.setEnabled(true);    //		textField.setLevelCtrl(true);    //		textField.setCtrlLevelNum(3);    //		textField.setRandomEdit(false);    //		textField.setPrefix("01");    textField.initComboBox();    JPanel panel = new JPanel();    panel.add(textField);    f.getContentPane().add(panel, BorderLayout.NORTH);    // f.pack();    // SwingUtilities.updateComponentTreeUI(panel);    f.setSize(400, 300);    f.setLocationRelativeTo(null);    f.setVisible(true);    f.addWindowListener(new WindowAdapter() {      public void windowClosing(WindowEvent e) {        System.exit(0);      }    });  }}