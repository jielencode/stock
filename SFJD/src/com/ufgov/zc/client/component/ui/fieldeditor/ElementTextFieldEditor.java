package com.ufgov.zc.client.component.ui.fieldeditor;import java.awt.event.KeyAdapter;import java.awt.event.KeyEvent;import java.math.BigDecimal;import javax.swing.JComponent;import javax.swing.JTextField;import com.ufgov.zc.client.component.MoneyDocument;import com.ufgov.zc.common.bi.model.BcDetail;public class ElementTextFieldEditor extends AbstractFieldEditor {  private static final long serialVersionUID = 8924846243639619343L;  private JTextField field;  private String type;  public ElementTextFieldEditor(String name) {    super(name);  }  public ElementTextFieldEditor(String name, String type, boolean isEditable) {    super(name);    this.type = type;    this.field.setEditable(isEditable);  }  public ElementTextFieldEditor(String name, boolean isEditable) {    super(name);    this.field.setEditable(isEditable);  }  public Object getValue() {    return field.getText();  }  public void setValue(Object value) { //在选择的上面的行发生改变的时候所触发的事件    if (value == null || value instanceof String) {      field.setText((String) value);    } else if (value instanceof BcDetail) {      BcDetail bcDetail = (BcDetail) value;      if (this.type.equals("AM_MONEY")) {        if (bcDetail.getAmMoney() != null) {          field.setText(bcDetail.getAmMoney().toPlainString());        } else {          field.setText(null);        }      } else if (this.type.equals("CO_SELF_MONEY")) {        if (bcDetail.getCoSelfMoney() != null) {          field.setText(bcDetail.getCoSelfMoney().toPlainString());        } else {          field.setText(null);        }      } else if (this.type.equals("BANK_LOAN_MONEY")) {        if (bcDetail.getBankLoanMoney() != null) {          field.setText(bcDetail.getBankLoanMoney().toPlainString());        } else {          field.setText(null);        }      } else if (this.type.equals("USE_MONEY")) {        if (bcDetail.getUseMoney() != null) {          field.setText(bcDetail.getUseMoney().toPlainString());        } else {          field.setText(null);        }      }      return;    }  }  protected JComponent createEditorComponent() { //生成下面的控件，并将改变的内容同步到对象中    field = new JTextField();    field.setDocument(new MoneyDocument(false));    field.addKeyListener(new KeyAdapter() {      public void keyReleased(KeyEvent e) {        syncEditObject();      }    });    return field;  }  protected void syncEditObject() {    if (getEditObject() instanceof BcDetail) {      BcDetail bcDetail = (BcDetail) getEditObject();      if (bcDetail != null) {        String fieldValue = field.getText();        if (fieldValue != null && !"".equals(fieldValue)) {          if (this.type.equals("AM_MONEY")) {            bcDetail.setAmMoney(BigDecimal.valueOf(Double.valueOf(fieldValue)));          } else if (this.type.equals("CO_SELF_MONEY")) {            bcDetail.setCoSelfMoney(BigDecimal.valueOf(Double.valueOf(fieldValue)));          } else if (this.type.equals("BANK_LOAN_MONEY")) {            bcDetail.setBankLoanMoney(BigDecimal.valueOf(Double.valueOf(fieldValue)));          } else if (this.type.equals("USE_MONEY")) {            bcDetail.setUseMoney(BigDecimal.valueOf(Double.valueOf(fieldValue)));          }        } else {          if (this.type.equals("AM_MONEY")) {            bcDetail.setAmMoney(null);          } else if (this.type.equals("CO_SELF_MONEY")) {            bcDetail.setCoSelfMoney(null);          } else if (this.type.equals("BANK_LOAN_MONEY")) {            bcDetail.setBankLoanMoney(null);          } else if (this.type.equals("USE_MONEY")) {            bcDetail.setUseMoney(null);          }        }      }    }    this.fireEditSynced();  }  @Override  public void setFieldEditorCode() {    // TODO Auto-generated method stub  }}