package com.ufgov.zc.server.zc.fileResumeBroken.communication;import java.util.HashMap;import java.util.Iterator;import java.util.Map;import com.caucho.hessian.server.HessianServlet;import com.ufgov.zc.common.zc.SendFile;import com.ufgov.zc.server.zc.fileResumeBroken.serverFileOperate.ServerFileOperate;public class SendFileImpl extends HessianServlet implements SendFile {  public Map sendFileByStream(Map parameterMap, byte[] buff, String sequenceOrder) {    this.toUpperCaseParas(parameterMap);    ServerFileOperate serverFileOperate = new ServerFileOperate();    serverFileOperate.outPutStream(parameterMap, buff, sequenceOrder);    Map rv = new HashMap();    rv.put("FILEID", serverFileOperate.getFileId());    rv.put("TS_STATUS", serverFileOperate.getTransStatus());    rv.put("ERR_CONTENT", serverFileOperate.getErrContent());    rv.put("SERVERFILELEN", serverFileOperate.getServerFileLen() + "");    return rv;  }  public Map sendFileByStreamB(Map paraMap, String sequenceOrder) {    this.toUpperCaseParas(paraMap);    ServerFileOperate serverFileOperate = new ServerFileOperate();    byte[] buff = (byte[]) paraMap.get("BUFFCONTENT");    serverFileOperate.outPutStream(paraMap, buff, sequenceOrder);    Map rv = new HashMap();    rv.put("FILEID", serverFileOperate.getFileId());    rv.put("TS_STATUS", serverFileOperate.getTransStatus());    rv.put("ERR_CONTENT", serverFileOperate.getErrContent());    rv.put("SERVERFILELEN", serverFileOperate.getServerFileLen() + "");    return rv;  }  /**   * 统一转换所有的key为大写   * @param parasMap   * @returnln   */  private Map toUpperCaseParas(Map parasMap) {    System.out.println("SendFileImpl.class 服务器端接受到的参数如下：");    Map retMap = new HashMap();    Iterator it = parasMap.keySet().iterator();    while (it.hasNext()) {      String key = (String) it.next();      Object value = parasMap.get(key);      String KEY = key.toUpperCase();      System.out.println("key:" + KEY + ",value:" + value);      retMap.put(KEY, value);    }    return retMap;  }}