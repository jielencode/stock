package com.ufgov.zc.server.zc.web.action.make;import java.util.HashMap;import java.util.Map;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.commons.logging.Log;import org.apache.commons.logging.LogFactory;import org.apache.struts.action.ActionForm;import org.apache.struts.action.ActionForward;import org.apache.struts.action.ActionMapping;import com.ufgov.zc.common.zc.pagination.WebPagination;import com.ufgov.zc.server.zc.dao.pagination.PaginationHandler;import com.ufgov.zc.server.zc.dao.pagination.PaginationHandlerJSImpl;import com.ufgov.zc.server.zc.service.IZcMakeIndexListService;import com.ufgov.zc.server.zc.web.action.StrutsAction;import com.ufgov.zc.server.zc.web.form.SupplierFormBean;public class MakeMoreAction extends StrutsAction {  private final static Log log = LogFactory.getLog(MakeAction.class);  public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {    request.setCharacterEncoding("UTF-8");    response.setContentType("text/html;charset=UTF-8");    SupplierFormBean supplierFormBean = (SupplierFormBean) form;    String forward = "success";    IZcMakeIndexListService zcMakeIndexListService = (IZcMakeIndexListService) this.getWebApplicationContext().getBean("zcMakeIndexListService");    try {      // IZcEbSupplierService zcEbSupplierService = (IZcEbSupplierService) this.getWebApplicationContext().getBean("zcEbSupplierService");      Map parameterObject = new HashMap();      //分页      PaginationHandler handler = new PaginationHandlerJSImpl();      WebPagination pagination = webPagination(request, mapping);      handler.setPerCount(pagination.getPageSize());      long count = new Long(zcMakeIndexListService.getMakeListCount(parameterObject).intValue()).longValue();      handler.setTotalCount(count);      pagination.setTotalSize((int) count);      handler.setTotalCount(count);      handler.moveCursor((long) pagination.getCurrentPage());      //request.setAttribute("handler", pagination);      supplierFormBean.setPagination(pagination);      parameterObject.put("start", new Long(handler.getStartCursor()).toString());      parameterObject.put("end", new Long(handler.getEndCursor()).toString());      supplierFormBean.setSuList(zcMakeIndexListService.getMakeList(parameterObject));      supplierFormBean.setCountNum(new Integer(new Long(count).intValue()));    } catch (Exception e) {      log.error(e);      throw e;    }    return mapping.findForward(forward);  }}