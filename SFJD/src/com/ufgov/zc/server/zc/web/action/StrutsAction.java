package com.ufgov.zc.server.zc.web.action;import javax.servlet.http.HttpServletRequest;import org.apache.log4j.Logger;import org.apache.struts.action.ActionMapping;import org.springframework.web.struts.ActionSupport;import com.ufgov.zc.common.zc.pagination.GenericWebPagination;import com.ufgov.zc.common.zc.pagination.WebPagination;public class StrutsAction extends ActionSupport {  protected Logger logger = Logger.getLogger(this.getClass());  /* 提供简化分页的方法 */  /**   * 从request中获取当前页   * @param request   * @param pagination   * @return 当前页号   */  protected int getCurrentPage(HttpServletRequest request, WebPagination pagination) {    return pagination.stringToInt(request.getParameter(pagination.getCurrentPageParamName()));  }  /**   * 从request中获取每页显示记录数   * @param request   * @param pagination   * @return 每页显示记录数   */  protected int getPageSize(HttpServletRequest request, WebPagination pagination) {    String pageSize = request.getParameter(pagination.getPageSizeParamName());    if (pageSize == null || pageSize.length() == 0) {      return 15;//固定写死了！！！！    } else {      return pagination.stringToInt(pageSize);    }  }  /**   * 创建分页对象，然后从request中获取当前页号和每页显示的记录数赋值给分页对象   * 注意，返回的WebPagination实例还需要设置从记录数才能进行分页计算。   * @param request    * @return 新创建的分页对象，其中当前页号和每页显示的记录数已经被初始化   */  protected WebPagination webPagination(HttpServletRequest request, ActionMapping mapping) {    WebPagination pagination = new GenericWebPagination();    pagination.setCurrentPage(getCurrentPage(request, pagination));// set current page    pagination.setPageSize(getPageSize(request, pagination)); // set page size     pagination.setFormName(mapping.getName());// set html form name      if (logger.isInfoEnabled()) {      logger.info("创建分页管理器[currentpage=" + getCurrentPage(request, pagination) + ",pagesize=" + getPageSize(request, pagination) + ",formname="      + mapping.getName() + "]");    }    return pagination;  }}