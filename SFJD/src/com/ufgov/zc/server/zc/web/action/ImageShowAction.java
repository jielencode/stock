/** *  */package com.ufgov.zc.server.zc.web.action;import java.io.OutputStream;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import org.apache.struts.action.ActionForm;import org.apache.struts.action.ActionForward;import org.apache.struts.action.ActionMapping;import org.springframework.web.struts.ActionSupport;import com.ufgov.zc.common.system.model.AsFile;import com.ufgov.zc.server.system.service.IAsFileService;public class ImageShowAction extends ActionSupport {  public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {    String fileId = (String) request.getParameter("fileId");    response.setContentType("image/jpeg");    if (fileId != null && !"".equals(fileId)) {      IAsFileService asFileDBService = (IAsFileService) this.getWebApplicationContext().getBean("asFileService");      AsFile file = asFileDBService.getAsFileById(fileId);      OutputStream toClient = null;      try {        toClient = response.getOutputStream();        toClient.write(file.getFileContent());        toClient.flush();      } finally {        try {          toClient.close();        } catch (Exception e) {        }      }    }    return null;  }}