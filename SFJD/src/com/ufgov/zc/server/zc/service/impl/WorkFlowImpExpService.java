//package com.ufgov.zc.server.zc.service.impl;////////import java.util.ArrayList;////import java.util.HashSet;////import java.util.Iterator;////import java.util.List;////import java.util.Set;////////import com.kingdrive.workflow.dao.WFRuntimeDao;////import com.kingdrive.workflow.model.runtime.ActionHistoryModel;////import com.kingdrive.workflow.model.runtime.ActionModel;////import com.kingdrive.workflow.model.runtime.CurrentTaskModel;////import com.kingdrive.workflow.model.runtime.InstanceModel;////import com.kingdrive.workflow.model.runtime.StateValueModel;////import com.kingdrive.workflow.model.runtime.TaskExecutorModel;//////////////////import com.ufgov.zc.common.console.model.AsEmp;//import com.ufgov.zc.common.zc.model.AsUserSession;//import com.ufgov.zc.common.zc.model.AsUserSessionExample;//import com.ufgov.zc.common.zc.model.WorkflowImpModel;//import com.ufgov.zc.server.console.dao.IAsEmpDao;//import com.ufgov.zc.server.system.dao.IUserDao;//import com.ufgov.zc.server.zc.dao.AsUserSessionDAO;//import com.ufgov.zc.server.zc.service.IWorkFlowImpExpService;////////public class WorkFlowImpExpService implements IWorkFlowImpExpService {////  private WFRuntimeDao runtimeDao;////////  private AsUserSessionDAO asUserSessionDAO;////////  private IAsEmpDao asEmpDao;////////  private IUserDao userDao;////////  public WorkflowImpModel getWorkFlowInforByInsId(Long instanceId) {////    WorkflowImpModel wim = new WorkflowImpModel();////    wim.setInstanceModel(runtimeDao.getInstanceById(instanceId));//获取ins////////    ActionHistoryModel actionHistory = new ActionHistoryModel();////    actionHistory.setInstanceId(instanceId);////    wim.setActionHistoryModelList(runtimeDao.getActionHistory(actionHistory));//获取his////////    ActionModel action = new ActionModel();////    action.setInstanceId(instanceId);////    wim.setActionModelList(runtimeDao.getAction(action));//获取action////////    CurrentTaskModel task = new CurrentTaskModel();////    task.setInstanceId(instanceId);////    wim.setCurrentTaskModelList(runtimeDao.getCurrentTask(task));//获取task////////    TaskExecutorModel m = new TaskExecutorModel();////    m.setInstanceId(instanceId);////    wim.setTaskExecutorModelList(runtimeDao.getTaskExecutorModel(m));//获取executor////////    wim.setStateValueModelList(runtimeDao.getStateValueByIns(instanceId));//获取statevalue////////    List executorList = getExecutorList(wim.getTaskExecutorModelList());////    List asSeesinoList = getExcutorAsSessionList(executorList);////    wim.setAsUserSessionList(asSeesinoList);////////    List asEmpList = getAsEmpLits(executorList);////    wim.setAsEmpList(asEmpList);////    return wim;////  }////////  private List getAsEmpLits(List executorList) {////    List asEmpList = new ArrayList();////    AsEmp emp = new AsEmp();////    for (Iterator iterator = executorList.iterator(); iterator.hasNext();) {////      String userId = (String) iterator.next();////      emp.setUserId(userId);////      asEmpList.addAll(asEmpDao.getAsEmp(emp));////    }////    return asEmpList;////  }////////  private List getExecutorList(List taskExecutorModelList) {////    Set userIds = new HashSet();////    for (Iterator iterator = taskExecutorModelList.iterator(); iterator.hasNext();) {////      TaskExecutorModel ahm = (TaskExecutorModel) iterator.next();////      userIds.add(ahm.getExecutor());////    }////    return new ArrayList(userIds);////  }////////  private List getExcutorAsSessionList(List executorList) {////    AsUserSessionExample example = new AsUserSessionExample();////    example.createCriteria().andUserIdIn(executorList);////    List selist = asUserSessionDAO.selectByExample(example);////    return selist;////  }////////  public void impWorkFlowInfor(WorkflowImpModel wim) {////    InstanceModel insModel = wim.getInstanceModel();////    runtimeDao.removeInstanceById(insModel.getInstanceId());////    runtimeDao.importInscance(insModel);////    //先删除此实例下所有记录////    removeActionHistoryModel(insModel.getInstanceId());////    removeActionModel(insModel.getInstanceId());////    removeTaskExecutorModel(insModel.getInstanceId());////    removeStateValueModel(insModel.getInstanceId());////    removeCurrentTaskModel(insModel.getInstanceId());////    removeAsEmp(wim.getAsEmpList());////    removeAsSession(wim.getAsUserSessionList());////    //再插入此实例的所有新记录////    insertAsEmp(wim.getAsEmpList());////    insertAsSession(wim.getAsUserSessionList());////    insertActionHistoryModel(wim.getActionHistoryModelList());////    insertActionModel(wim.getActionModelList());////    insertTaskExecutorModel(wim.getTaskExecutorModelList());////    insertStateValueModel(wim.getStateValueModelList());////    insertCurrentTaskModel(wim.getCurrentTaskModelList());////  }////////  private void insertAsSession(List asUserSessionList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = asUserSessionList.iterator(); iterator.hasNext();) {////      AsUserSession aus = (AsUserSession) iterator.next();////      asUserSessionDAO.insert(aus);////    }////  }////////  private void insertAsEmp(List asEmpList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = asEmpList.iterator(); iterator.hasNext();) {////      AsEmp md = (AsEmp) iterator.next();////      asEmpDao.insert(md);////    }////  }////////  private void removeAsSession(List asUserSessionList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = asUserSessionList.iterator(); iterator.hasNext();) {////      AsUserSession aus = (AsUserSession) iterator.next();////      AsUserSessionExample example = new AsUserSessionExample();////      example.createCriteria().andUserIdEqualTo(aus.getUserId());////      asUserSessionDAO.deleteByExample(example);////    }////  }////////  private void removeAsEmp(List asEmpList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = asEmpList.iterator(); iterator.hasNext();) {////      AsEmp md = (AsEmp) iterator.next();////      userDao.deleteAsEmpByUserId(md.getUserId());////    }////  }////////  private void removeCurrentTaskModel(Long instanceId) {////    CurrentTaskModel task = new CurrentTaskModel();////    task.setInstanceId(instanceId);////    runtimeDao.removeCurrentTask(task);////  }////////  private void removeStateValueModel(Long instanceId) {////    StateValueModel state = new StateValueModel();////    state.setInstanceId(instanceId);////    runtimeDao.removeSateValue(state);////  }////////  private void removeTaskExecutorModel(Long instanceId) {////    TaskExecutorModel executor = new TaskExecutorModel();////    executor.setInstanceId(instanceId);////    runtimeDao.removeTaskExecutor(executor);////  }////////  private void removeActionModel(Long instanceId) {////    ActionModel action = new ActionModel();////    action.setInstanceId(instanceId);////    runtimeDao.removeAction(action);////  }////////  private void removeActionHistoryModel(Long instanceId) {////    ActionHistoryModel actionHistory = new ActionHistoryModel();////    actionHistory.setInstanceId(instanceId);////    runtimeDao.removeActionHistory(actionHistory);////  }////////  private void insertCurrentTaskModel(List currentTaskModelList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = currentTaskModelList.iterator(); iterator.hasNext();) {////      CurrentTaskModel task = (CurrentTaskModel) iterator.next();////      runtimeDao.createCurrentTask(task);////    }////  }////////  private void insertStateValueModel(List stateValueModelList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = stateValueModelList.iterator(); iterator.hasNext();) {////      StateValueModel stateValue = (StateValueModel) iterator.next();////      runtimeDao.createStateValue(stateValue);////    }////  }////////  private void insertTaskExecutorModel(List taskExecutorModelList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = taskExecutorModelList.iterator(); iterator.hasNext();) {////      TaskExecutorModel executor = (TaskExecutorModel) iterator.next();////      runtimeDao.createTaskExecutor(executor);////    }////  }////////  private void insertActionModel(List actionModelList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = actionModelList.iterator(); iterator.hasNext();) {////      ActionModel action = (ActionModel) iterator.next();////      runtimeDao.createAction(action);////    }////  }////////  private void insertActionHistoryModel(List actionHistoryModelList) {////    // TODO Auto-generated method stub////    for (Iterator iterator = actionHistoryModelList.iterator(); iterator.hasNext();) {////      ActionHistoryModel actionHistory = (ActionHistoryModel) iterator.next();////      runtimeDao.createActionHistory(actionHistory);////    }////  }////////  public WFRuntimeDao getRuntimeDao() {////    return runtimeDao;////  }////////  public void setRuntimeDao(WFRuntimeDao runtimeDao) {////    this.runtimeDao = runtimeDao;////  }////////  public AsUserSessionDAO getAsUserSessionDAO() {////    return asUserSessionDAO;////  }////////  public void setAsUserSessionDAO(AsUserSessionDAO asUserSessionDAO) {////    this.asUserSessionDAO = asUserSessionDAO;////  }////////  public IAsEmpDao getAsEmpDao() {////    return asEmpDao;////  }////////  public void setAsEmpDao(IAsEmpDao asEmpDao) {////    this.asEmpDao = asEmpDao;////  }////////  public IUserDao getUserDao() {////    return userDao;////  }////////  public void setUserDao(IUserDao userDao) {////    this.userDao = userDao;////  }////////}//