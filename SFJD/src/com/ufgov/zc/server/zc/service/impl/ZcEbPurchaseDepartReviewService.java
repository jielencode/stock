package com.ufgov.zc.server.zc.service.impl;import java.util.Iterator;import java.util.List;import com.ufgov.zc.common.system.RequestMeta;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.common.zc.model.ZcEbPurchaseDepRevDetail;import com.ufgov.zc.common.zc.model.ZcEbPurchaseDepRevDetailExample;import com.ufgov.zc.common.zc.model.ZcEbPurchaseDepartReview;import com.ufgov.zc.common.zc.model.ZcEbPurchaseDepartReviewExample;import com.ufgov.zc.server.system.dao.IWorkflowDao;import com.ufgov.zc.server.system.workflow.WFEngineAdapter;import com.ufgov.zc.server.zc.dao.IBaseDao;import com.ufgov.zc.server.zc.dao.IZcEbPurchaseDepRevDetailDAO;import com.ufgov.zc.server.zc.dao.IZcEbPurchaseDepartReviewDAO;import com.ufgov.zc.server.zc.service.IZcEbPurchaseDepartReviewService;public class ZcEbPurchaseDepartReviewService implements IZcEbPurchaseDepartReviewService {  private IZcEbPurchaseDepartReviewDAO zcEbPurchaseDepartReviewDAO;  private IZcEbPurchaseDepRevDetailDAO zcEbPurchaseDepRevDetailDAO;  private WFEngineAdapter wfEngineAdapter;  private IWorkflowDao workflowDao;  private IBaseDao baseDao;  public void interruptZcPProMake(ZcEbPurchaseDepartReview make, RequestMeta meta) {    wfEngineAdapter.interrupt(null, make, meta);  }  public ZcEbPurchaseDepartReview CancelMake(ZcEbPurchaseDepartReview currentObject, RequestMeta meta) {    interruptZcPProMake(currentObject, meta);    this.updateZcEbPurchaseDepartReview(currentObject, meta);    return currentObject;  }  public ZcEbPurchaseDepartReview auditFN(ZcEbPurchaseDepartReview currentObject, RequestMeta requestMeta) {    // TODO Auto-generated method stub    this.updateZcEbPurchaseDepartReview(currentObject, requestMeta);    wfEngineAdapter.commit(currentObject.getComment(), currentObject, requestMeta);    return currentObject;  }  public ZcEbPurchaseDepartReview callbackFN(ZcEbPurchaseDepartReview currentObject, RequestMeta requestMeta) {    wfEngineAdapter.callback(currentObject.getComment(), currentObject, requestMeta);    return currentObject;  }  public void deleteZcEbPurchaseDepartReviewByCode(String reviewCode, RequestMeta requestMeta) {    ZcEbPurchaseDepartReviewExample example = new ZcEbPurchaseDepartReviewExample();    example.createCriteria().andReviewCodeEqualTo(reviewCode);    zcEbPurchaseDepartReviewDAO.deleteByExample(example);  }  public void deleteZcEbPurchaseDepartReviewById(String reviewId, RequestMeta requestMeta) {    // TODO Auto-generated method stub    zcEbPurchaseDepartReviewDAO.deleteByPrimaryKey(reviewId);    ZcEbPurchaseDepRevDetailExample detaileexp = new ZcEbPurchaseDepRevDetailExample();    detaileexp.createCriteria().andReviewIdEqualTo(reviewId);    List collection = zcEbPurchaseDepRevDetailDAO.selectByExample(detaileexp);    for (Iterator iterator = collection.iterator(); iterator.hasNext();) {      ZcEbPurchaseDepRevDetail d = (ZcEbPurchaseDepRevDetail) iterator.next();      zcEbPurchaseDepRevDetailDAO.deleteByPrimaryKey(d.getDetailId());    }  }  public void deleteZcEbPurchaseDepartReviewByIds(String[] reviewIds, RequestMeta requestMeta) {    // TODO Auto-generated method stub    for (int i = 0; i < reviewIds.length; i++) {      zcEbPurchaseDepartReviewDAO.deleteByPrimaryKey(reviewIds[i]);    }  }  public List getZcEbPurchaseDepartReviewByCondition(ElementConditionDto condition, RequestMeta requestMeta) {    // TODO Auto-generated method stub    ZcEbPurchaseDepartReviewExample example = new ZcEbPurchaseDepartReviewExample();    return zcEbPurchaseDepartReviewDAO.selectByExample(example);  }  public ZcEbPurchaseDepartReview getZcEbPurchaseDepartReviewById(String reviewId, RequestMeta requestMeta) {    ZcEbPurchaseDepartReview review = zcEbPurchaseDepartReviewDAO.selectByPrimaryKey(reviewId);    ZcEbPurchaseDepRevDetailExample example = new ZcEbPurchaseDepRevDetailExample();    example.createCriteria().andReviewIdEqualTo(review.getReviewId());    List detail = zcEbPurchaseDepRevDetailDAO.selectByExample(example);    review.setDetail(detail);    return review;  }  public ZcEbPurchaseDepartReview insertZcEbPurchaseDepartReview(ZcEbPurchaseDepartReview po, RequestMeta requestMeta) {    po.setEditDate(requestMeta.getSysDate());    po.setEditUserId(requestMeta.getSvUserID());    po.setEditUserName(requestMeta.getSvUserName());    zcEbPurchaseDepartReviewDAO.insert(po);    List detail = po.getDetail();    if (detail != null) {      for (Iterator iterator = detail.iterator(); iterator.hasNext();) {        ZcEbPurchaseDepRevDetail d = (ZcEbPurchaseDepRevDetail) iterator.next();        d.setReviewId(po.getReviewId());        zcEbPurchaseDepRevDetailDAO.insert(d);      }    }    return po;  }  public ZcEbPurchaseDepartReview newCommitFN(ZcEbPurchaseDepartReview currentObject, boolean isFromList, RequestMeta requestMeta) {    wfEngineAdapter.newCommit(currentObject.getComment(), currentObject, requestMeta);    return currentObject;  }  public ZcEbPurchaseDepartReview unAuditFN(ZcEbPurchaseDepartReview currentObject, RequestMeta requestMeta) {    wfEngineAdapter.rework(currentObject.getComment(), currentObject, requestMeta);    return currentObject;  }  public ZcEbPurchaseDepartReview untreadFN(ZcEbPurchaseDepartReview currentObject, RequestMeta requestMeta) {    wfEngineAdapter.untread(currentObject.getComment(), currentObject, requestMeta);    return currentObject;  }  public void updateZcEbPurchaseDepartReview(ZcEbPurchaseDepartReview po, RequestMeta requestMeta) {    // TODO Auto-generated method stub    zcEbPurchaseDepartReviewDAO.updateByPrimaryKeySelective(po);    ZcEbPurchaseDepRevDetailExample example = new ZcEbPurchaseDepRevDetailExample();    example.createCriteria().andReviewIdEqualTo(po.getReviewId());    zcEbPurchaseDepRevDetailDAO.deleteByExample(example);    List detail = po.getDetail();    if (detail != null) {      for (Iterator iterator = detail.iterator(); iterator.hasNext();) {        ZcEbPurchaseDepRevDetail det = (ZcEbPurchaseDepRevDetail) iterator.next();        det.setReviewId(po.getReviewId());        zcEbPurchaseDepRevDetailDAO.insert(det);      }    }  }  public IZcEbPurchaseDepartReviewDAO getZcEbPurchaseDepartReviewDAO() {    return zcEbPurchaseDepartReviewDAO;  }  public void setZcEbPurchaseDepartReviewDAO(IZcEbPurchaseDepartReviewDAO zcEbPurchaseDepartReviewDAO) {    this.zcEbPurchaseDepartReviewDAO = zcEbPurchaseDepartReviewDAO;  }  public IZcEbPurchaseDepRevDetailDAO getZcEbPurchaseDepRevDetailDAO() {    return zcEbPurchaseDepRevDetailDAO;  }  public void setZcEbPurchaseDepRevDetailDAO(IZcEbPurchaseDepRevDetailDAO zcEbPurchaseDepRevDetailDAO) {    this.zcEbPurchaseDepRevDetailDAO = zcEbPurchaseDepRevDetailDAO;  }  public WFEngineAdapter getWfEngineAdapter() {    return wfEngineAdapter;  }  public void setWfEngineAdapter(WFEngineAdapter wfEngineAdapter) {    this.wfEngineAdapter = wfEngineAdapter;  }  public IWorkflowDao getWorkflowDao() {    return workflowDao;  }  public void setWorkflowDao(IWorkflowDao workflowDao) {    this.workflowDao = workflowDao;  }  public IBaseDao getBaseDao() {    return baseDao;  }  public void setBaseDao(IBaseDao baseDao) {    this.baseDao = baseDao;  }}