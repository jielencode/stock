/* * 创建日期 2006-9-25 * * TODO 要更改此生成的文件的模板，请转至 * 窗口 － 首选项 － Java － 代码样式 － 代码模板 */package com.ufgov.zc.server.zc.dao.pagination;import java.util.HashMap;import java.util.Iterator;import java.util.Map;import java.util.Set;public class PaginationHandlerJSImpl extends PaginationHandlerImpl {  private static final String jsFunction = "<SCRIPT>" + "function link(form){" + "form = eval(form);" + "form.submit();" + "}" + "</SCRIPT>";  protected Map paramMap = new HashMap();  public void appendParam(String paramName, String paramValue) {    paramMap.put(paramName, paramValue);  }  public String getUrlAddress() {    return urlAddress;  }  public void setUrlAddress(String urlAddress) {    this.urlAddress = urlAddress;  }  public String getPaginationInfo() {    /*     * <ul style="COLOR: #b70002; TEXT-ALIGN: right">共<%=countNum%>条记录 1/2页 &nbsp;      <li class="disablepage">上一页 </li>      <li class="currentpage">1</li>      <li><a href="http://www.zjzfcg.gov.cn/new/menugoods/spSearch_2.do?spzlId=8af652091004da74011005a513290009&amp;xySpYear=2010&amp;xySpTime=1&amp;toImg=no">2</a>       <li class="nextpage"><a href="http://www.zjzfcg.gov.cn/new/menugoods/spSearch_2.do?spzlId=8af652091004da74011005a513290009&amp;xySpYear=2010&amp;xySpTime=1&amp;toImg=no">下一页</a>       <li>&nbsp;第<select onchange="if(this.value==1){location='http://www.zjzfcg.gov.cn/new/menugoods/spSearch.do?spzlId=8af652091004da74011005a513290009&amp;xySpYear=2010&amp;xySpTime=1&amp;toImg=no'}else{location='http://www.zjzfcg.gov.cn/new/menugoods/spSearch_'+this.value+'.do?spzlId=8af652091004da74011005a513290009&amp;xySpYear=2010&amp;xySpTime=1&amp;toImg=no'}this.disabled='disabled'">         <option value="1" selected>1</option><option value="2">2</option></select>页       </li>    </ul>     * */    String totalCount = "<ul style=\"COLOR: #b70002; TEXT-ALIGN: right\">共[" + this.totalCount + "]条  分[" + this.getTotalPage() + "]页 &nbsp";    String curPage = "<li>第[" + this.curPageNumber + "]页   </li>";    String nextpage = "<li>下一页</li>";    String previouspage = "<li>上一页</li>";    String firstpage = "<li>首页</li>";    String lastpage = "<li>末页</li>";    if (this.hasPreviousPage()) {      firstpage = "<FORM name=\"FirstPage\" method=\"POST\" action=\"" + urlAddress      + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('FirstPage')\">首页</a>" + getParamInput(1) + "</td></FORM>";      previouspage = "<FORM name=\"PreviousPage\" method=\"POST\" action=\"" + urlAddress      + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('PreviousPage')\">前一页</a>"      + getParamInput(curPageNumber - 1) + "</td></FORM>";    }    if (this.hasNextPage()) {      nextpage = "<FORM name=\"NextPage\" method=\"POST\" action=\"" + urlAddress      + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('NextPage')\">下一页</a>" + getParamInput(curPageNumber + 1)      + "</td></FORM>";      lastpage = "<FORM name=\"LastPage\" method=\"POST\" action=\"" + urlAddress      + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('LastPage')\">末页</a>" + getParamInput(getTotalPage())      + "</td></FORM>";    }    String pageCount = null;    ;    // 每页几条，如果没有设置参数名称，采用默认的：    pageCount = "<FORM name=\"pageCont\" method=\"POST\" action=\"" + urlAddress    + "\"><td style=\"border-style: solid; border-width: 0\">每页<INPUT size='2' type=\"text\" name=\"pageCount\" \" value=\"" + this.getPerCount()    + ">条";    pageCount += getParamInput(1);    // 添加GO按钮    //        info.append("&nbsp;<INPUT TYPE='button' value='GO'onclick=\"submitFormByName(").append(formName).append(",").append(formName).append(".").append(paramName).append(".value").append(")\" >");    pageCount += "&nbsp;<INPUT TYPE='submit' value='Go'></td></FORM>";    String info = "<TABLE><TR>" + totalCount + curPage + firstpage + previouspage + nextpage + lastpage + pageCount + "</TR></TABLE>";    return info;  }  /*  public String getPaginationInfo() {
      String token = " <FORM><td style=\"border-style: solid; border-width: 0\">|</td></FORM> ";      String totalCount = "<FORM><td style=\"border-style: solid; border-width: 0\">共[" + this.totalCount + "]条  分[" + this.getTotalPage()        + "]页</td></FORM> ";      String curPage = "<FORM><td style=\"border-style: solid; border-width: 0\">第[" + this.curPageNumber + "]页   </td></FORM>";      String nextpage = "<FORM><td style=\"border-style: solid; border-width: 0\">下一页</td></FORM>";      String previouspage = "<FORM><td style=\"border-style: solid; border-width: 0\">上一页</td></FORM>";      String firstpage = "<FORM><td style=\"border-style: solid; border-width: 0\">首页</td></FORM>";      String lastpage = "<FORM><td style=\"border-style: solid; border-width: 0\">末页</td></FORM>";
      if (this.hasPreviousPage()) {        firstpage = "<FORM name=\"FirstPage\" method=\"POST\" action=\"" + urlAddress          + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('FirstPage')\">首页</a>" + getParamInput(1) + "</td></FORM>";        previouspage = "<FORM name=\"PreviousPage\" method=\"POST\" action=\"" + urlAddress          + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('PreviousPage')\">前一页</a>"          + getParamInput(curPageNumber - 1) + "</td></FORM>";      }      if (this.hasNextPage()) {        nextpage = "<FORM name=\"NextPage\" method=\"POST\" action=\"" + urlAddress          + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('NextPage')\">下一页</a>" + getParamInput(curPageNumber + 1)          + "</td></FORM>";        lastpage = "<FORM name=\"LastPage\" method=\"POST\" action=\"" + urlAddress          + "\"><td style=\"border-style: solid; border-width: 0\"><a href=\"javascript:link('LastPage')\">末页</a>" + getParamInput(getTotalPage())          + "</td></FORM>";      }      String pageCount = null;      ;      // 每页几条，如果没有设置参数名称，采用默认的：      pageCount = "<FORM name=\"pageCont\" method=\"POST\" action=\"" + urlAddress        + "\"><td style=\"border-style: solid; border-width: 0\">每页<INPUT size='2' type=\"text\" name=\"pageCount\" \" value=\"" + this.getPerCount()        + ">条";      pageCount += getParamInput(1);      // 添加GO按钮      //        info.append("&nbsp;<INPUT TYPE='button' value='GO'onclick=\"submitFormByName(").append(formName).append(",").append(formName).append(".").append(paramName).append(".value").append(")\" >");      pageCount += "&nbsp;<INPUT TYPE='submit' value='Go'></td></FORM>";      String info = "<TABLE><TR>" + totalCount + curPage + firstpage + token + previouspage + token + nextpage + token + lastpage + pageCount        + "</TR></TABLE>";      return info;    }*/  public String getJSFunction() {    return jsFunction;  }  protected String getParamInput(long page) {    String key = null;    String value = null;    String input = "";    Set set = paramMap.keySet();    Iterator it = set.iterator();    while (it.hasNext()) {      key = (String) it.next();      value = (String) paramMap.get(key);      input = input + "<INPUT type=\"hidden\" name=\"" + key + "\" value=\"" + value + "\">";    }    // 追加一个输入框用来存放当前页号    input = input + "<INPUT type=\"hidden\" name=\"" + paramName + "\" value=\"" + page + "\">";    return input;  }  //    public static void  main(String a[]){  //        PaginationHandler handler = new PaginationHandlerJSImpl();  //        handler.setTotalCount(110);  //        handler.setPerCount(10);  //        handler.setUrlAddress("http://www.tom.com");  //        handler.moveCursor(5);  //        handler.appendParam("path","你好啦");  //        handler.appendParam("paths","你好啦呵呵");  //        System.out.println(handler.getPaginationInfo());  //        System.out.println(handler.getJSFunction());  //    }}