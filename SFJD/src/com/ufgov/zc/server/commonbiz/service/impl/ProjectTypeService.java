package com.ufgov.zc.server.commonbiz.service.impl;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import com.ufgov.zc.common.commonbiz.model.ProjectType;import com.ufgov.zc.server.commonbiz.dao.IProjectTypeDao;import com.ufgov.zc.server.commonbiz.service.IProjectTypeService;public class ProjectTypeService implements IProjectTypeService {  IProjectTypeDao projectTypeDao;  public List getProjectTypeTree(int nd) {    List rootProjectTypeList = projectTypeDao.getRootProjectType(nd);    List childrenProjectTypeList = projectTypeDao    .getChildrenProjectType(nd);    Map childrenMap = new HashMap();    for (int i = 0; i < childrenProjectTypeList.size(); i++) {      ProjectType child = (ProjectType) childrenProjectTypeList.get(i);      List childrenList = (List) childrenMap.get(child.getParentCode());      if (childrenList != null) {        childrenList.add(child);      } else {        List tempList = new ArrayList();        tempList.add(child);        childrenMap.put(child.getParentCode(), tempList);      }    }    for (int i = 0; i < rootProjectTypeList.size(); i++) {      ProjectType projectType = (ProjectType) rootProjectTypeList.get(i);      this.setChildren(projectType, childrenMap);    }    return rootProjectTypeList;  }  private void setChildren(ProjectType projectType, Map childrenMap) {    List childrenList = (List) childrenMap.get(projectType.getCode());    if (childrenList != null) {      projectType.setChildren(childrenList);      for (int i = 0; i < childrenList.size(); i++) {        ProjectType c = (ProjectType) childrenList.get(i);        setChildren(c, childrenMap);      }    }  }  public List getProjectType(int nd) {    return projectTypeDao.getProjectType(nd);  }  public IProjectTypeDao getProjectTypeDao() {    return projectTypeDao;  }  public void setProjectTypeDao(IProjectTypeDao projectTypeDao) {    this.projectTypeDao = projectTypeDao;  }}