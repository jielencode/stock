package com.ufgov.zc.server.system.util;import java.io.File;import java.io.IOException;import java.io.InputStream;import java.math.BigDecimal;import java.text.DecimalFormat;import java.text.NumberFormat;import java.util.Date;import java.util.Map;import java.util.Properties;import com.ufgov.zc.common.commonbiz.fieldmap.FieldMapRegister;import com.ufgov.zc.common.dp.model.DpDetail;import com.ufgov.zc.common.system.util.BeanUtil;import com.ufgov.zc.common.system.util.DateUtil;public class BankDataExportUtil {  private static Properties properties = new Properties();  static {    InputStream is = BankDataExportUtil.class.getClassLoader().getResourceAsStream(    "BankDataExport.properties");    try {      properties.load(is);      is.close();    } catch (IOException e) {      throw new RuntimeException(e);    }  }  public static String process(String templateString, Object bill) {    String fields[] = templateString.split(",");    Map fieldMap = FieldMapRegister.get(bill.getClass());    String resultString = new String(templateString);    for (int i = 0; i < fields.length; i++) {      String field = new String(fields[i]);      if (field.startsWith("@")) {        String tempField = field.replaceFirst("@", "");        String property = (String) fieldMap.get(tempField.toUpperCase());        if (property == null) {          continue;        }        String pv = objectToString(BeanUtil.get(property, bill));        if (pv == null) {          pv = "";        }        resultString = resultString.replaceAll(field, pv);      }    }    return resultString;  }  private static NumberFormat nfmt = new DecimalFormat("#.00");  private static String objectToString(Object value) {    if (value == null) {      return null;    }    String result = null;    if (value instanceof java.util.Date) {      result = DateUtil.dateToShortDdString((java.util.Date) value);    } else if (value instanceof BigDecimal) {      result = nfmt.format(((BigDecimal) value));    } else {      result = value + "";    }    return result;  }  public static String getProperty(String key) {    return properties.getProperty(key);  }  public static void main(String[] args) {    System.out.println(properties.getProperty("BB_AMVE.MAIN"));    String s = properties.getProperty("BB_AMVE.MAIN");    String template = "@CO_CoDE,XX,@ORG_MONEY,@proc_date";    DpDetail de = new DpDetail();    de.setCoCode("1111111");    de.setOrgMoney(new BigDecimal("123456"));    de.setProcdate(new Date());    System.out.println("\n" + process(template, de));    File file = new File("c:/ufgovlog3/sss");    if (!file.exists()) {      file.mkdirs();    }  }}