package com.ufgov.zc.client.datacache;import java.util.ArrayList;import java.util.Collections;import java.util.HashMap;import java.util.List;import java.util.Map;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.common.commonbiz.model.BankAccount;import com.ufgov.zc.common.system.RequestMeta;public class DwZeroAccountDataCache {  private static Map<String, BankAccount> dataMap;  private static Map<String, List<BankAccount>> dataListMap = new HashMap<String, List<BankAccount>>();  /**   * 取单位零余额帐户   * @param coCode   * @return   */  public static BankAccount getDwZeroAccount(String coCode) {    List<BankAccount> dataList = getDwZeroAccountList(coCode);    if (dataList.size() == 0) {      return null;    }    else {      return dataList.get(0);    }  }  public static List<BankAccount> getDwZeroAccountList(String coCode) {    List<BankAccount> dataList = dataListMap.get(coCode);    if (dataList == null) {      refreshData(coCode);      return dataListMap.get(coCode);    }    return dataList;  }  public static BankAccount getBankAccount(String coCode, String bankAccCode) {    BankAccount bankAccount = dataMap.get(bankAccCode);    if (bankAccount == null) {      refreshData(coCode);      return dataMap.get(bankAccCode);    }    return bankAccount;  }  public static synchronized void refreshData(String coCode) {    RequestMeta requestMeta = WorkEnv.getInstance().getRequestMeta();    int nd = WorkEnv.getInstance().getTransNd();    List accoTypeList = new ArrayList();    accoTypeList.add("04");    List<BankAccount> dataList = Util.baseDataServiceDelegate.getDwZeroAccountList(nd, accoTypeList, coCode,    requestMeta);    Map tempMap = new HashMap();    for (Object o : dataList) {      BankAccount bankAccount = (BankAccount) o;      tempMap.put(bankAccount.getBankAccCode(), bankAccount);    }    dataMap = Collections.unmodifiableMap(tempMap);    dataListMap.put(coCode, Collections.unmodifiableList(dataList));  }}