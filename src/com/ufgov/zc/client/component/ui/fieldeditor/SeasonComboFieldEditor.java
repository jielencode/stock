package com.ufgov.zc.client.component.ui.fieldeditor;import java.awt.BorderLayout;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.WindowAdapter;import java.awt.event.WindowEvent;import javax.swing.JComponent;import javax.swing.JFrame;import javax.swing.JPanel;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.client.component.SeasonComboBox;import com.ufgov.zc.common.dp.model.DpDetail;public class SeasonComboFieldEditor extends AbstractFieldEditor {  private SeasonComboBox seasonComboBox;  public SeasonComboFieldEditor(String name) {    super(name);  }  public SeasonComboFieldEditor(String name, boolean isEditable) {    super(name);    this.seasonComboBox.setEnabled(isEditable);  }  public Object getValue() {    return seasonComboBox.getSelectedIndex();  }  public void setItems(Object[] items) {    seasonComboBox.removeAllItems();    for (int i = 0; i < items.length; i++) {      seasonComboBox.addItem(items[i]);    }  }  protected JComponent createEditorComponent() { //生成下面的控件，并将改变的内容同步到对象中    seasonComboBox = new SeasonComboBox();    seasonComboBox.addActionListener(new ActionListener() {      public void actionPerformed(ActionEvent e) {        if (getEditObject() instanceof DpDetail) {          DpDetail dpDetail = (DpDetail) getEditObject();          int monthId = 3 * (seasonComboBox.getSelectedIndex() + 1) - 2;//取季度的第一个月          dpDetail.setMonth(monthId);          dpDetail.setSeason(seasonComboBox.getSelectedIndex() + 1);        }      }    });    return seasonComboBox;  }  public void setValue(Object value) { //在选择的上面的行发生改变的时候所触发的事件    if (value instanceof DpDetail) {      DpDetail dpDetail = (DpDetail) value;      if (dpDetail.getSeason() == 0) {        int monthId = WorkEnv.getInstance().getTransMonth();        int anIndex = monthId % 3 == 0 ? monthId / 3 : (monthId / 3 + 1);//默认值        seasonComboBox.setSelectedIndex(anIndex - 1);      } else {        seasonComboBox.setSelectedIndex(dpDetail.getSeason() - 1);      }    }  }  public static void main(String[] args) {    JFrame f = new JFrame();    SeasonComboFieldEditor textField = new SeasonComboFieldEditor("季度");    JPanel panel = new JPanel();    panel.add(textField);    f.getContentPane().add(panel, BorderLayout.NORTH);    f.setSize(400, 300);    f.setLocationRelativeTo(null);    f.setVisible(true);    f.addWindowListener(new WindowAdapter() {      public void windowClosing(WindowEvent e) {        System.exit(0);      }    });  }  public void setFieldEditorCode() {    this.FieldEditorCode = FieldEditorCodeConstants.SEASON;  }}