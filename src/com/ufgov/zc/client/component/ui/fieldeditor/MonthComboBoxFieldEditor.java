package com.ufgov.zc.client.component.ui.fieldeditor;import java.awt.BorderLayout;import java.awt.event.ActionEvent;import java.awt.event.ActionListener;import java.awt.event.WindowAdapter;import java.awt.event.WindowEvent;import javax.swing.JComponent;import javax.swing.JFrame;import javax.swing.JPanel;import com.ufgov.zc.client.common.WorkEnv;import com.ufgov.zc.client.component.MonthComboBox;import com.ufgov.zc.common.am.model.AmApply;import com.ufgov.zc.common.am.model.AmVoucher;public class MonthComboBoxFieldEditor extends AbstractFieldEditor {  private MonthComboBox planMothCombox;  public MonthComboBoxFieldEditor(String name) {    super(name);  }  public MonthComboBoxFieldEditor(String name, boolean isEditable) {    super(name);    this.planMothCombox.setEnabled(isEditable);  }  public Object getValue() {    return planMothCombox.getSelectedIndex();  }  public void setItems(Object[] items) {    planMothCombox.removeAllItems();    for (int i = 0; i < items.length; i++) {      planMothCombox.addItem(items[i]);    }  }  protected JComponent createEditorComponent() { //生成下面的控件，并将改变的内容同步到对象中    planMothCombox = new MonthComboBox();    planMothCombox.addActionListener(new ActionListener() {      public void actionPerformed(ActionEvent e) {        if (getEditObject() instanceof AmApply) {          AmApply amApply = (AmApply) getEditObject();          if (planMothCombox.getSelectedIndex() == -1) {            amApply.setPreMonth(WorkEnv.getInstance().getTransMonth());          } else {            amApply.setPreMonth(planMothCombox.getSelectedIndex());          }        }        if (getEditObject() instanceof AmVoucher) {          AmVoucher amVoucher = (AmVoucher) getEditObject();          if (planMothCombox.getSelectedIndex() == -1) {            amVoucher.setPreMonth(WorkEnv.getInstance().getTransMonth());          } else {            amVoucher.setPreMonth(planMothCombox.getSelectedIndex());          }        }      }    });    return planMothCombox;  }  public void setValue(Object value) { //在选择的上面的行发生改变的时候所触发的事件    if (value instanceof AmApply) {      AmApply amApply = (AmApply) value;      if (amApply.getPreMonth() == null) {        int monthId = WorkEnv.getInstance().getTransMonth();        planMothCombox.setSelectedIndex(monthId);      } else {        planMothCombox.setSelectedIndex(amApply.getPreMonth());      }    }    if (value instanceof AmVoucher) {      AmVoucher amVoucher = (AmVoucher) value;      if ((Integer) amVoucher.getPreMonth() == null) {        int monthId = WorkEnv.getInstance().getTransMonth();        planMothCombox.setSelectedIndex(monthId);      } else {        planMothCombox.setSelectedIndex(amVoucher.getPreMonth());      }    }  }  public static void main(String[] args) {    JFrame f = new JFrame();    MonthComboBoxFieldEditor textField = new MonthComboBoxFieldEditor("");    JPanel panel = new JPanel();    panel.add(textField);    f.getContentPane().add(panel, BorderLayout.NORTH);    f.setSize(400, 300);    f.setLocationRelativeTo(null);    f.setVisible(true);    f.addWindowListener(new WindowAdapter() {      public void windowClosing(WindowEvent e) {        System.exit(0);      }    });  }  @Override  public void setFieldEditorCode() {    this.FieldEditorCode = FieldEditorCodeConstants.MONTH;  }}