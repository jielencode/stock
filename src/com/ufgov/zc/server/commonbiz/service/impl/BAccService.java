package com.ufgov.zc.server.commonbiz.service.impl;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import com.ufgov.zc.common.commonbiz.model.BAcc;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.server.commonbiz.dao.IBAccDao;import com.ufgov.zc.server.commonbiz.service.IBAccService;public class BAccService implements IBAccService {  private IBAccDao baccDao;  public IBAccDao getBaccDao() {    return baccDao;  }  public void setBaccDao(IBAccDao baccDao) {    this.baccDao = baccDao;  }  public List getBAccTree(int nd) {    List rootBAccList = baccDao.getRootBAcc(nd);    List childrenBAccList = baccDao.getChildrenBAcc(nd);    Map childrenMap = new HashMap();    for (int i = 0; i < childrenBAccList.size(); i++) {      BAcc child = (BAcc) childrenBAccList.get(i);      List childrenList = (List) childrenMap.get(child.getParentCode());      if (childrenList != null) {        childrenList.add(child);      } else {        List tempList = new ArrayList();        tempList.add(child);        childrenMap.put(child.getParentCode(), tempList);      }    }    for (int i = 0; i < rootBAccList.size(); i++) {      BAcc bAcc = (BAcc) rootBAccList.get(i);      this.setChildren(bAcc, childrenMap);    }    return rootBAccList;  }  private void setChildren(BAcc bAcc,  Map childrenMap) {    List childrenList = (List) childrenMap.get(bAcc.getCode());    if (childrenList != null) {      bAcc.setChildren(childrenList);      for (int i = 0; i < childrenList.size(); i++) {        BAcc c = (BAcc) childrenList.get(i);        setChildren(c, childrenMap);      }    }  }  public List getBAcc(ElementConditionDto dto) {    return baccDao.getBAcc(dto);  }}