package com.ufgov.zc.server.system.print;import java.io.File;import net.sf.jasperreports.engine.JRException;import net.sf.jasperreports.engine.JasperCompileManager;import net.sf.jasperreports.engine.JasperReport;import net.sf.jasperreports.engine.util.JRLoader;import com.ufgov.zc.common.system.exception.PrintException;import com.ufgov.zc.server.system.util.EnvironmentConfigUtil;public class PrintTemplateLoader {  private static final String REPORTSPATH = "reportspath";  public static JasperReport loadJasperReportFromXML(String templateCode) {    JasperReport jasperReport = null;    try {      String reportspath = EnvironmentConfigUtil.getInstance().get(REPORTSPATH);      reportspath += "/" + templateCode + ".xml";      File file = new File(reportspath);      if (file.exists()) {        jasperReport = JasperCompileManager.compileReport(reportspath);      }      else {        throw new PrintException("没有找到打印模板[" + templateCode + ".xml]");      }    } catch (JRException e) {      throw new PrintException(e.getMessage(), e);    }    return jasperReport;  }  public static JasperReport loadJasperReport(String templateCode) {    JasperReport jasperReport = null;    try {//      testFilePath();       //      String reportspath=PrintTemplateLoader.class.getClassLoader().getResource("").toString();//      reportspath += templateCode + ".jasper";            String reportspath ="./"+ EnvironmentConfigUtil.getInstance().get(REPORTSPATH);      reportspath += "/" + templateCode + ".jasper";      //      System.out.println("jasper path:"+reportspath);      File file = new File(reportspath);//      File file = new File("D://workplace//eclipseWorkplace//yangzhong//bin//ZC_EM_EXPERT_SELECTION_L.jasper");      if (file.exists()) {        jasperReport = (JasperReport) JRLoader.loadObject(file);      }      else {        throw new PrintException("没有找到打印模板[" + templateCode + ".jasper]");      }    } catch (Exception e) {      e.printStackTrace();      throw new PrintException(e.getMessage(), e);    }    return jasperReport;  }    private static void testFilePath(){    System.out.println("---------------=================------------------------");    System.out.println(Thread.currentThread().getContextClassLoader().getResource(""));    System.out.println(PrintTemplateLoader.class.getClassLoader().getResource(""));    System.out.println(ClassLoader.getSystemResource(""));    System.out.println(PrintTemplateLoader.class.getResource(""));    System.out.println(PrintTemplateLoader.class.getResource("/")); // Class文件所在路径    System.out.println(new File("/").getAbsolutePath());    System.out.println(System.getProperty("user.dir"));    System.out.println("---------------========tttttttttttttt====------------------------");  }}