package com.ufgov.zc.server.zc.actions;import java.util.HashMap;import java.util.Map;import com.ufgov.zc.common.zc.model.ZcEbPlan;import com.ufgov.zc.server.system.SpringContext;import com.ufgov.zc.server.zc.service.IZcEbPlanService;import com.ufgov.zc.server.zc.service.IZcEbSignupService;public class UpdateRelationDataAction {  private Map parameterMap = new HashMap();  private Map returnMap = new HashMap();  private String functionDo = null;  private IZcEbSignupService zcEbSignupService = null;  private IZcEbPlanService zcEbPlanService = null;  public UpdateRelationDataAction(Map parameterMap, String functionDo) {    setParameterMap(parameterMap);    setFunctionDo(functionDo);    zcEbSignupService = (IZcEbSignupService) SpringContext.getBean("zcEbSignupService");    zcEbPlanService = (IZcEbPlanService) SpringContext.getBean("zcEbPlanService");  }  public void start() {    if (this.zcEbSignupService == null || this.zcEbPlanService == null) {      this.returnMap.put("FAILREASON", "service 对象为空,zcEbPlanSerivce:" + this.zcEbPlanService + ",zcEbSignupService:" + this.zcEbSignupService);      this.returnMap.put("UPDATESTATUS", "fail");      return;    }    this.returnMap.clear();    toFinishJobs();  }  private void toFinishJobs() {    this.returnMap = null;    try {      this.returnMap = this.zcEbSignupService.updateRelationDataForTBFileUpload(this.parameterMap);      String projCode = (String) this.parameterMap.get("PROJECTCODE");      this.returnMap.putAll(this.getProjectInfo(projCode));    } catch (Exception e) {      System.out.println("供应商投标后更新相关数据时失败...");      e.printStackTrace();    }  }  private Map getProjectInfo(String projCode) {    Map paras = new HashMap();    ZcEbPlan plan = this.zcEbPlanService.getZcEbPlanByProjCode(projCode);    paras.put("MANAGERNAME", plan.getDocSeller());    paras.put("MANAGERPHONE", plan.getDocSellPhone());    paras.put("OFFICEADDRESS", plan.getDocSellAddress());    return paras;  }  public Map getParameterMap() {    return parameterMap;  }  public void setParameterMap(Map parameterMap) {    this.parameterMap = parameterMap;  }  public Map getReturnMap() {    return returnMap;  }  public void setReturnMap(Map returnMap) {    this.returnMap = returnMap;  }  public String getFunctionDo() {    return functionDo;  }  public void setFunctionDo(String functionDo) {    this.functionDo = functionDo;  }}