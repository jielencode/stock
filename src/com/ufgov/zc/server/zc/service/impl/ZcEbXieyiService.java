/** * ZcebZbService.java * com.ufgov.gk.server.zc.service.impl * Administrator * 2010-7-16 */package com.ufgov.zc.server.zc.service.impl;import java.util.ArrayList;import java.util.List;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.common.zc.model.ZcBBrand;import com.ufgov.zc.common.zc.model.ZcBMerDiscount;import com.ufgov.zc.common.zc.model.ZcBMerPrice;import com.ufgov.zc.common.zc.model.ZcBMerchandise;import com.ufgov.zc.common.zc.model.ZcBXieyiGoods;import com.ufgov.zc.server.zc.dao.IZcEbXieyiDao;import com.ufgov.zc.server.zc.service.IZcEbXieyiService;/** * @author LEO * */public class ZcEbXieyiService implements IZcEbXieyiService {  private IZcEbXieyiDao zcEbXieyiDao;  public IZcEbXieyiDao getZcEbXieyiDao() {    return zcEbXieyiDao;  }  public void setZcEbXieyiDao(IZcEbXieyiDao zcEbXieyiDao) {    this.zcEbXieyiDao = zcEbXieyiDao;  }  public List getXieyiGoodsRelationData(ElementConditionDto dto) {    List goodsList = new ArrayList();    for (int i = 0; i < dto.getPmAdjustCodeList().size(); i++) {      String zcMerCode = (String) dto.getPmAdjustCodeList().get(i);      ZcBXieyiGoods goods = new ZcBXieyiGoods();      ZcBMerchandise para1 = new ZcBMerchandise();      para1.setZcMerCode(zcMerCode);      ZcBMerchandise merchandise = this.zcEbXieyiDao.getZcBMerchandise(para1);      goods.setZcBMerchandise(merchandise);      ZcBBrand para2 = new ZcBBrand();      para2.setZcBraCode(merchandise.getZcBraCode());      ZcBBrand brand = this.zcEbXieyiDao.getZcBBrand(para2);      goods.setBelongZcBBrand(brand);      ZcBMerPrice para3 = new ZcBMerPrice();      para3.setZC_MER_CODE(zcMerCode);      para3.setZC_BRA_CODE(para2.getZcBraCode());      ZcBMerPrice price = this.zcEbXieyiDao.getZcBMerPrice(para3);      goods.setZcBMerPrice(price);      ZcBMerDiscount para4 = new ZcBMerDiscount();      para4.setZcMerCode(zcMerCode);      para4.setZcSuCode(price.getZC_SU_CODE());      List merDiscountList = this.zcEbXieyiDao.getZcBMerDiscountList(para4);      goods.setZcBMerDiscountList(merDiscountList);      goodsList.add(goods);    }    return goodsList;  }  public String importGoodsData(ZcBXieyiGoods goods) {    this.zcEbXieyiDao.addZcBMerchandise(goods.getZcBMerchandise());    for (int i = 0; i < goods.getZcBMerDiscountList().size(); i++) {      ZcBMerDiscount dis = (ZcBMerDiscount) goods.getZcBMerDiscountList().get(i);      this.zcEbXieyiDao.addZcBMerDiscountList(dis);    }    this.zcEbXieyiDao.addZcBBrand(goods.getBelongZcBBrand());    this.zcEbXieyiDao.addZcBMerPrice(goods.getZcBMerPrice());    return "OK";  }}