package com.ufgov.zc.server.zc.expertQA;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.ArrayList;import java.util.List;import com.ufgov.zc.common.system.dto.ElementConditionDto;import com.ufgov.zc.common.zc.model.ZcExpertQuestion;import com.ufgov.zc.common.zc.model.ZcExpertQuestionContent;import com.ufgov.zc.server.system.SpringContext;import com.ufgov.zc.server.zc.service.IZcExpertQuestionContentService;import com.ufgov.zc.server.zc.service.IZcExpertQuestionService;public class QAContentDataOperate {  private IZcExpertQuestionService zcExpertQuestionService;  private IZcExpertQuestionContentService zcExpertQuestionContentService;  public void insertDialogueMessage(String object, String projectCode, String packCode, String selfObjectName, String toObjectName) {    if (getDialogue(object, projectCode, packCode, selfObjectName, toObjectName) == 0) {      ZcExpertQuestion bean = new ZcExpertQuestion();      bean.setProjCode(projectCode);      bean.setPackCode(packCode);      if (object.equals("supplier")) {        bean.setExpertName(toObjectName);        bean.setSupplierName(selfObjectName);      } else if (object.equals("expert")) {        bean.setExpertName(selfObjectName);        bean.setSupplierName(toObjectName);      }      zcExpertQuestionService.insertExpertQuestion(bean);    }  }  public long getDialogue(String object, String projectCode, String packCode, String selfObjectName, String toObjectName) {    long id = 0;    List list = new ArrayList();    zcExpertQuestionService = (IZcExpertQuestionService) SpringContext.getBean("zcExpertQuestionService");    ElementConditionDto dto = new ElementConditionDto();    dto.setExtField1(projectCode);    dto.setExtField2(packCode);    if (object.equals("supplier")) {      dto.setExtField3(toObjectName);      dto.setExtField4(selfObjectName);    } else if (object.equals("expert")) {      dto.setExtField3(selfObjectName);      dto.setExtField4(toObjectName);    }    list = zcExpertQuestionService.getExpertQuestion(dto);    if (list.size() >= 1) {      ZcExpertQuestion bean = (ZcExpertQuestion) list.get(0);      id = bean.getId();    }    return id;  }  public void insertDialogueContentMessage(String object, String selfObjectName, String toObjectName, String projectCode, String packCode,  String sender, String sendTime, String sendContent) {    ZcExpertQuestionContent bean = new ZcExpertQuestionContent();    bean.setDialogueId(getDialogue(object, projectCode, packCode, selfObjectName, toObjectName));    bean.setSender(sender);    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");    try {      bean.setSendTime(format.parse(sendTime));    } catch (ParseException e) {      // TODO Auto-generated catch block      e.printStackTrace();    }    bean.setSendContent(sendContent);    zcExpertQuestionContentService = (IZcExpertQuestionContentService) SpringContext.getBean("zcExpertQuestionContentService");    zcExpertQuestionContentService.insertZcExpertQuestionContent(bean);  }}