package com.ufgov.zc.server.zc.web.form;import java.math.BigDecimal;import java.util.ArrayList;import java.util.Date;import java.util.HashMap;import java.util.List;import com.ufgov.zc.common.commonbiz.model.Company;import com.ufgov.zc.common.zc.model.ZcPProMake;import com.ufgov.zc.common.zc.model.ZcPProMitem;import com.ufgov.zc.server.commonbiz.service.ICompanyService;import com.ufgov.zc.server.system.SpringContext;import com.ufgov.zc.server.zc.service.IZcPProMakeService;public class ZcProMakePrintForm extends AbstractActionForm {  private static final long serialVersionUID = -127140804047344129L;  private List zcProMakeList;  private List itemList;  private int itemTotalCount;  private BigDecimal totalMerSum;  private BigDecimal totalItemSum;  private String description;  private String co_name;  private IZcPProMakeService zcPProMakeService;  private ICompanyService companyService;  public String getDescription() {    return description;  }  public void setDescription(String description) {    this.description = description;  }  public int getItemTotalCount() {    return itemTotalCount;  }  public void setItemTotalCount(int itemTotalCount) {    this.itemTotalCount = itemTotalCount;  }  public BigDecimal getTotalMerSum() {    return totalMerSum;  }  public void setTotalMerSum(BigDecimal totalMerSum) {    this.totalMerSum = totalMerSum;  }  public BigDecimal getTotalItemSum() {    return totalItemSum;  }  public void setTotalItemSum(BigDecimal totalItemSum) {    this.totalItemSum = totalItemSum;  }  public IZcPProMakeService getZcPProMakeService() {    return zcPProMakeService;  }  public void setZcPProMakeService(IZcPProMakeService zcPProMakeService) {    this.zcPProMakeService = zcPProMakeService;  }  public List getItemList() {    return itemList;  }  public void setItemList(List itemList) {    this.itemList = itemList;  }  public List getZcProMakeList() {    return zcProMakeList;  }  public void setZcProMakeList(List zcProMakeList) {    this.zcProMakeList = zcProMakeList;  }  public String toZcProMakeListPrint() {    String code_array = this.getRequest().getParameter("code_array");    String zcMakeCode = "";    if (code_array.indexOf("@") != -1) {      String[] zcMakeCodeArr = code_array.split("@");    } else {      zcMakeCode = code_array;    }    return SUCCESS;  }  public String toZcProMakeDetailPrint() {    zcPProMakeService = (IZcPProMakeService) SpringContext.getBean("zcPProMakeService");    companyService = (ICompanyService) SpringContext.getBean("companyService");    String code_array = this.getRequest().getParameter("code_array");    String zcMakeCode = "";    if (code_array.indexOf("@") != -1) {      String[] zcMakeCodeArr = code_array.split("@");      for (int i = 0; i < zcMakeCodeArr.length; i++) {        zcMakeCode = zcMakeCodeArr[i];        ZcPProMake zcPProMake = zcPProMakeService.selectByPrimaryKey(zcMakeCode);      }    } else {      zcMakeCode = this.getRequest().getParameter("code_array");      ZcPProMake zcPProMake = zcPProMakeService.selectByPrimaryKey(zcMakeCode);      Date date = new Date();      Company company = companyService.getCompanyByCoCode(date.getYear() + 1900, zcPProMake.getCoCode());      co_name = company.getName();      List beanlist = new ArrayList();      beanlist.add(zcPProMake);      setZcProMakeList(beanlist);      setItemList(zcPProMake.getItemList());      setItemTotalCount(zcPProMake.getItemList().size() + 3);      BigDecimal totalItemSum_temp = new BigDecimal("0.00");      BigDecimal totalMerSum_temp = new BigDecimal("0.00");      for (int i = 0; i < zcPProMake.getItemList().size(); i++) {        ZcPProMitem zcPProMitem = (ZcPProMitem) zcPProMake.getItemList().get(i);        totalItemSum_temp = totalItemSum_temp.add(zcPProMitem.getZcItemSum());        totalMerSum_temp = totalMerSum_temp.add(zcPProMitem.getZcMerPrice());      }      setTotalItemSum(totalItemSum_temp);      setTotalMerSum(totalMerSum_temp);      List desList = zcPProMakeService.getWfActionDescription(zcPProMake.getProcessInstId());      StringBuffer desc = new StringBuffer();      for (int i = desList.size() - 1; i >= 0; i--) {        HashMap map = (HashMap) desList.get(i);        String description = map.get("DESCRIPTION") == null ? "" : map.get("DESCRIPTION").toString();        String executor = map.get("EXECUTOR").toString();        if (i == desList.size() - 1)          desc.append(executor).append("\t").append(description).append("<br /><br />");        else          desc.append(executor).append(":").append("\t").append(description).append("<br /><br />");      }      setDescription(desc.toString());    }    return SUCCESS;  }  public ICompanyService getCompanyService() {    return companyService;  }  public void setCompanyService(ICompanyService companyService) {    this.companyService = companyService;  }  public String getCo_name() {    return co_name;  }  public void setCo_name(String co_name) {    this.co_name = co_name;  }}