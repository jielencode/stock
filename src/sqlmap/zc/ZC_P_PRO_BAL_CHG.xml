<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >

<sqlMap namespace="ZC_P_PRO_BAL_CHG" >

<typeAlias alias="elementCondition"
		type="com.ufgov.zc.common.system.dto.ElementConditionDto" />
  <resultMap id="abatorgenerated_ZcPProBalChgResult" class="com.ufgov.zc.common.zc.model.ZcPProBalChg" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    <result column="BAL_CHG_ID" property="balChgId" jdbcType="VARCHAR" />
    <result column="ZC_MAKE_CODE" property="zcMakeCode" jdbcType="VARCHAR" />
    <result column="ZC_MAKE_NAME" property="zcMakeName" jdbcType="VARCHAR" />
    <result column="CO_CODE" property="coCode" jdbcType="VARCHAR" />
    <result column="ND" property="nd" jdbcType="DECIMAL" />
    <result column="ZC_MAKE_LINKMAN" property="zcMakeLinkman" jdbcType="VARCHAR" />
    <result column="ZC_MAKE_TEL" property="zcMakeTel" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="ZC_INPUT_CODE" property="zcInputCode" jdbcType="VARCHAR" />
    <result column="ZC_INPUT_NAME" property="zcInputName" jdbcType="VARCHAR" />
    <result column="ZC_INPUT_DATE" property="zcInputDate" jdbcType="DATE" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="ZC_MONEY_BI_SUM" property="zcMoneyBiSum" jdbcType="DECIMAL" />
    <result column="ZC_MONEY_ZC_SUM" property="zcMoneyZcSum" jdbcType="DECIMAL" />
    <result column="PROCESS_INST_ID" property="processInstId" jdbcType="DECIMAL" />
    <result column="AGENCY" property="agency" jdbcType="VARCHAR" />
    <result column="AGENCY_NAME" property="agencyName" jdbcType="VARCHAR" />
    <result column="ORG_CODE" property="orgCode" jdbcType="VARCHAR" />
    <result column="ORG_NAME" property="orgName" jdbcType="VARCHAR" />
    <result column="ZC_PIFU_CGFS" property="zcPifuCgfs" jdbcType="VARCHAR" />
    <result column="ZC_PITEM_MODE" property="zcPitemMode" jdbcType="VARCHAR" />
    <result column="ZC_DIYU_DAIMA" property="zcDiyuDaima" jdbcType="VARCHAR" />
    <result column="ZC_FUKUAN_TYPE" property="zcFukuanType" jdbcType="VARCHAR" />
    <result column="ZC_YEP_SUM" property="zcYepSum" jdbcType="DECIMAL" />
    <result column="ZC_BI_NZJZ_SUM" property="zcBiNzjzSum" jdbcType="DECIMAL" />
  </resultMap>
  
   <select id="selectZcPProBalChgList" resultMap="abatorgenerated_ZcPProBalChgResult" parameterClass="elementCondition" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    select *
    
    from ZC_P_PRO_BAL_CHG master
    where 1=1

	<include refid="BusiNumLim.BusiNumLimStr" />
    
    <isNotNull prepend="and" property="status">
			<isEqual property="status" compareValue="todo">
				exists (select
				instance_id from v_wf_current_task_gk53 where executor =#executor#
				and instance_id = master.process_inst_id)
			</isEqual>
			<isEqual property="status" compareValue="done">
				exists (select
				instance_id from V_WF_ACTION_HISTORY_GK53 where executor =
				#executor# and instance_id = master.process_inst_id)
				and
				master.STATUS!='cancel'
				and master.STATUS!='exec'
			</isEqual>
			<isEqual property="status" compareValue="exec">
				(master.STATUS ='exec')
			</isEqual>
			<isEqual property="status" compareValue="draft">
				exists (select
				WF_DRAFT_NAME from as_wf_draft where user_id=#executor# and
				compo_id=#wfcompoId# and WF_DRAFT_ID=master.process_inst_id)
				or
				master.process_inst_id = -1
			</isEqual>
			<isEqual property="status" compareValue="all">
				1=1
			</isEqual>
			<isEqual property="status" compareValue="untread">

				exists ( select

				instance_id from V_WF_CURRENT_TASK_ZC_UNTREAD where executor

				=#executor# and instance_id = master.process_inst_id)

			</isEqual>
		</isNotNull>
	   <isNotEqual prepend="AND" compareValue="0" property="nd">
			master.ND = #nd#
      </isNotEqual>	
		<isNotNull prepend="AND" property="coCode">
			master.CO_CODE=#coCode:VARCHAR#
		</isNotNull>
		
  </select>
  
  
  
  <select id="abatorgenerated_selectByPrimaryKey" resultMap="abatorgenerated_ZcPProBalChgResult" parameterClass="String" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    select BAL_CHG_ID, ZC_MAKE_CODE, ZC_MAKE_NAME, CO_CODE, ND, ZC_MAKE_LINKMAN, ZC_MAKE_TEL,
      STATUS, ZC_INPUT_CODE, ZC_INPUT_NAME, ZC_INPUT_DATE, REMARK, ZC_MONEY_BI_SUM, ZC_MONEY_ZC_SUM,
      PROCESS_INST_ID, AGENCY, AGENCY_NAME, ORG_CODE, ORG_NAME, ZC_PIFU_CGFS, ZC_PITEM_MODE,
      ZC_DIYU_DAIMA, ZC_FUKUAN_TYPE, ZC_YEP_SUM, ZC_BI_NZJZ_SUM
    from ZC_P_PRO_BAL_CHG
    where BAL_CHG_ID = #balChgId:VARCHAR#
  </select>
  <delete id="abatorgenerated_deleteByPrimaryKey" parameterClass="com.ufgov.zc.common.zc.model.ZcPProBalChg" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    delete from ZC_P_PRO_BAL_CHG
    where BAL_CHG_ID = #balChgId:VARCHAR#
  </delete>
 
  <insert id="abatorgenerated_insert" parameterClass="com.ufgov.zc.common.zc.model.ZcPProBalChg" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    insert into ZC_P_PRO_BAL_CHG (BAL_CHG_ID, ZC_MAKE_CODE, ZC_MAKE_NAME, CO_CODE, ND,
      ZC_MAKE_LINKMAN, ZC_MAKE_TEL, STATUS, ZC_INPUT_CODE, ZC_INPUT_NAME, ZC_INPUT_DATE, REMARK,
      ZC_MONEY_BI_SUM, ZC_MONEY_ZC_SUM, PROCESS_INST_ID, AGENCY, AGENCY_NAME, ORG_CODE, ORG_NAME,
      ZC_PIFU_CGFS, ZC_PITEM_MODE, ZC_DIYU_DAIMA, ZC_FUKUAN_TYPE, ZC_YEP_SUM, ZC_BI_NZJZ_SUM)
    values (#balChgId:VARCHAR#, #zcMakeCode:VARCHAR#, #zcMakeName:VARCHAR#, #coCode:VARCHAR#,
      #nd:DECIMAL#, #zcMakeLinkman:VARCHAR#, #zcMakeTel:VARCHAR#, #status:VARCHAR#,
      #zcInputCode:VARCHAR#, #zcInputName:VARCHAR#, #zcInputDate:DATE#, #remark:VARCHAR#,
      #zcMoneyBiSum:DECIMAL#, #zcMoneyZcSum:DECIMAL#, #processInstId:DECIMAL#, #agency:VARCHAR#,
      #agencyName:VARCHAR#, #orgCode:VARCHAR#, #orgName:VARCHAR#, #zcPifuCgfs:VARCHAR#,
      #zcPitemMode:VARCHAR#, #zcDiyuDaima:VARCHAR#, #zcFukuanType:VARCHAR#, #zcYepSum:DECIMAL#,
      #zcBiNzjzSum:DECIMAL#)
  </insert>
  <update id="abatorgenerated_updateByPrimaryKey" parameterClass="com.ufgov.zc.common.zc.model.ZcPProBalChg" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    update ZC_P_PRO_BAL_CHG
    set ZC_MAKE_CODE = #zcMakeCode:VARCHAR#,
      ZC_MAKE_NAME = #zcMakeName:VARCHAR#,
      CO_CODE = #coCode:VARCHAR#,
      ND = #nd:DECIMAL#,
      ZC_MAKE_LINKMAN = #zcMakeLinkman:VARCHAR#,
      ZC_MAKE_TEL = #zcMakeTel:VARCHAR#,
      STATUS = #status:VARCHAR#,
      ZC_INPUT_CODE = #zcInputCode:VARCHAR#,
      ZC_INPUT_NAME = #zcInputName:VARCHAR#,
      ZC_INPUT_DATE = #zcInputDate:DATE#,
      REMARK = #remark:VARCHAR#,
      ZC_MONEY_BI_SUM = #zcMoneyBiSum:DECIMAL#,
      ZC_MONEY_ZC_SUM = #zcMoneyZcSum:DECIMAL#,
      PROCESS_INST_ID = #processInstId:DECIMAL#,
      AGENCY = #agency:VARCHAR#,
      AGENCY_NAME = #agencyName:VARCHAR#,
      ORG_CODE = #orgCode:VARCHAR#,
      ORG_NAME = #orgName:VARCHAR#,
      ZC_PIFU_CGFS = #zcPifuCgfs:VARCHAR#,
      ZC_PITEM_MODE = #zcPitemMode:VARCHAR#,
      ZC_DIYU_DAIMA = #zcDiyuDaima:VARCHAR#,
      ZC_FUKUAN_TYPE = #zcFukuanType:VARCHAR#,
      ZC_YEP_SUM = #zcYepSum:DECIMAL#,
      ZC_BI_NZJZ_SUM = #zcBiNzjzSum:DECIMAL#
    where BAL_CHG_ID = #balChgId:VARCHAR#
  </update>
  <update id="abatorgenerated_updateByPrimaryKeySelective" parameterClass="com.ufgov.zc.common.zc.model.ZcPProBalChg" >
    <!--
      WARNING - This element is automatically generated by Abator for iBATIS, do not modify.
      This element was generated on Thu Jul 12 07:44:59 GMT 2012.
    -->
    update ZC_P_PRO_BAL_CHG
    <dynamic prepend="set" >
      <isNotNull prepend="," property="zcMakeCode" >
        ZC_MAKE_CODE = #zcMakeCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcMakeName" >
        ZC_MAKE_NAME = #zcMakeName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="coCode" >
        CO_CODE = #coCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="nd" >
        ND = #nd:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="zcMakeLinkman" >
        ZC_MAKE_LINKMAN = #zcMakeLinkman:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcMakeTel" >
        ZC_MAKE_TEL = #zcMakeTel:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="status" >
        STATUS = #status:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcInputCode" >
        ZC_INPUT_CODE = #zcInputCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcInputName" >
        ZC_INPUT_NAME = #zcInputName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcInputDate" >
        ZC_INPUT_DATE = #zcInputDate:DATE#
      </isNotNull>
      <isNotNull prepend="," property="remark" >
        REMARK = #remark:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcMoneyBiSum" >
        ZC_MONEY_BI_SUM = #zcMoneyBiSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="zcMoneyZcSum" >
        ZC_MONEY_ZC_SUM = #zcMoneyZcSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="processInstId" >
        PROCESS_INST_ID = #processInstId:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="agency" >
        AGENCY = #agency:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="agencyName" >
        AGENCY_NAME = #agencyName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orgCode" >
        ORG_CODE = #orgCode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="orgName" >
        ORG_NAME = #orgName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcPifuCgfs" >
        ZC_PIFU_CGFS = #zcPifuCgfs:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcPitemMode" >
        ZC_PITEM_MODE = #zcPitemMode:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcDiyuDaima" >
        ZC_DIYU_DAIMA = #zcDiyuDaima:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcFukuanType" >
        ZC_FUKUAN_TYPE = #zcFukuanType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="zcYepSum" >
        ZC_YEP_SUM = #zcYepSum:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="zcBiNzjzSum" >
        ZC_BI_NZJZ_SUM = #zcBiNzjzSum:DECIMAL#
      </isNotNull>
    </dynamic>
    where BAL_CHG_ID = #balChgId:VARCHAR#
  </update>
</sqlMap>