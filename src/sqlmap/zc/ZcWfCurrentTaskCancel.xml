<?xml version="1.0" encoding="UTF-8" ?><!DOCTYPE sqlMap          PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"          "http://ibatis.apache.org/dtd/sql-map-2.dtd"><sqlMap namespace="ZcWfCurrentTaskCancel">	<typeAlias alias="ZcWfCurrentTaskCancel" type="com.ufgov.zc.common.zc.model.ZcWfCurrentTaskCancel" />	<resultMap id="ZcWfCurrentTaskCancelResult" class="ZcWfCurrentTaskCancel">		<result property="entrustCancelId" column="ENTRUST_CANCEL_ID" />		<result property="tblName" column="tbl_name" />		<result property="keyColName" column="KEY_COL_NAME" />		<result property="statusCol" column="STATUS_COL" />		<result property="status" column="STATUS" />		<result property="instanceId" column="instance_id" />	</resultMap>	<select id="getZcWfCurrentTaskCancelResult" resultMap="ZcWfCurrentTaskCancelResult"		parameterClass="ZcWfCurrentTaskCancel">	select c.entrust_cancel_id,	c.tbl_name,	c.status_col,	c.status,	c.instance_id,	c.KEY_COL_NAME	from ZC_WF_CURRENT_TASK_Cancel c	where 1=1	<isNotNull prepend="and" property="entrustCancelId">		entrust_cancel_id=#entrustCancelId#	</isNotNull>	<isNotNull prepend="and" property="tblName">		tbl_name=#tblName#	</isNotNull>	</select>	<delete id="deleteBykey" parameterClass="string">		delete from ZC_WF_CURRENT_TASK_Cancel where ENTRUST_CANCEL_ID = #value#	</delete>	<delete id="deleteByTable" parameterClass="ZcWfCurrentTaskCancel">		delete from ZC_WF_CURRENT_TASK_Cancel where ENTRUST_CANCEL_ID = #entrustCancelId:VARCHAR# and tbl_name= #tblName:VARCHAR#	</delete>	<delete id="deleteByInstanceId" parameterClass="string">		delete from WF_CURRENT_TASK where instance_id = #value#	</delete>	<insert id="insertZcWfCurrentTaskCancel" parameterClass="ZcWfCurrentTaskCancel">insert into ZC_WF_CURRENT_TASK_Cancel  (ENTRUST_CANCEL_ID,   tbl_name,   KEY_COL_NAME,   STATUS_COL,   STATUS,   current_task_id,   instance_id,   node_id,   executor,   delegation_id,   owner,   creator,   create_time,   limit_execute_time,   responsibility,   parent_task_id,   gk_send_status,   granter_info,   granter_id,   mq_sms_status)  select #entrustCancelId:VARCHAR#,         #tblName:VARCHAR#,         #keyColName:VARCHAR#,         #statusCol:VARCHAR#,         #status:VARCHAR#,         current_task_id,         instance_id,         node_id,         executor,         delegation_id,         owner,         creator,         create_time,         limit_execute_time,         responsibility,         parent_task_id,         gk_send_status,         granter_info,         granter_id,         mq_sms_status    from WF_CURRENT_TASK   where instance_id = #instanceId#	</insert>	<insert id="insertSimpleZcWfCurrentTaskCancel" parameterClass="ZcWfCurrentTaskCancel">insert into ZC_WF_CURRENT_TASK_Cancel  (ENTRUST_CANCEL_ID,   tbl_name,   KEY_COL_NAME,   STATUS_COL,   STATUS,   instance_id)values ( #entrustCancelId:VARCHAR#,         #tblName:VARCHAR#,         #keyColName:VARCHAR#,         #statusCol:VARCHAR#,         #status:VARCHAR#,         #instanceId:VARCHAR#)	</insert>	<select id="getCount" resultClass="Long"		parameterClass="ZcWfCurrentTaskCancel">	select count(*)	from ZC_WF_CURRENT_TASK_Cancel c	where 1=1	<isNotNull prepend="and" property="entrustCancelId">		entrust_cancel_id=#entrustCancelId#	</isNotNull>	<isNotNull prepend="and" property="tblName">		tbl_name=#tblName#	</isNotNull>	<isNotNull prepend="and" property="instanceId">		instance_id=#instanceId#	</isNotNull>	</select>	<update id="updateCancel" parameterClass="ZcWfCurrentTaskCancel">	update $tblName$ set $statusCol$ = 'cancel' where $keyColName$=#instanceId#	</update>	<update id="updateRecovery" parameterClass="ZcWfCurrentTaskCancel">	update $tblName$ set $statusCol$ = #status:VARCHAR# where $keyColName$=#instanceId#	</update>		<insert id="insertWfRecovery" parameterClass="ZcWfCurrentTaskCancel">insert into WF_CURRENT_TASK  (current_task_id,   instance_id,   node_id,   executor,   delegation_id,   owner,   creator,   create_time,   limit_execute_time,   responsibility,   parent_task_id,   gk_send_status,   granter_info,   granter_id,   mq_sms_status)  select current_task_id,         instance_id,         node_id,         executor,         delegation_id,         owner,         creator,         create_time,         limit_execute_time,         responsibility,         parent_task_id,         gk_send_status,         granter_info,         granter_id,         mq_sms_status    from ZC_WF_CURRENT_TASK_Cancel    where current_task_id is not null	<isNotNull prepend="and" property="entrustCancelId">		entrust_cancel_id=#entrustCancelId#	</isNotNull>	<isNotNull prepend="and" property="tblName">		tbl_name=#tblName#	</isNotNull>	</insert>		<insert id="insertZcWfCurrentTaskCancelForInstance" parameterClass="ZcWfCurrentTaskCancel">insert into ZC_WF_CURRENT_TASK_Cancel  (ENTRUST_CANCEL_ID,   tbl_name,   KEY_COL_NAME,   STATUS_COL,   STATUS,   instance_id)  select #entrustCancelId:VARCHAR#,         'wf_instance',         'INSTANCE_ID',         'STATUS',         STATUS,         instance_id    from wf_instance   where instance_id = #instanceId#	</insert>	<update id="updateInstanceStatus" parameterClass="String">	update wf_instance set STATUS='9' where instance_id=#value#	</update></sqlMap>